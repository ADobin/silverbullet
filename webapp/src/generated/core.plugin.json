{
  "commands": {
    "Navigate To page": {
      "invoke": "linkNavigate",
      "key": "Ctrl-Enter",
      "mac": "Cmd-Enter"
    },
    "Insert Current Date": {
      "invoke": "insertToday",
      "slashCommand": "/today"
    },
    "Toggle : Heading 1": {
      "invoke": "toggle_h1",
      "mac": "Cmd-1",
      "key": "Ctrl-1"
    },
    "Toggle : Heading 2": {
      "invoke": "toggle_h2",
      "mac": "Cmd-2",
      "key": "Ctrl-2"
    },
    "Page: Delete": {
      "invoke": "deletePage"
    },
    "Page: Rename": {
      "invoke": "renamePage"
    },
    "Pages: Reindex": {
      "invoke": "reindexPages"
    },
    "Pages: Back Links": {
      "invoke": "showBackLinks"
    }
  },
  "events": {
    "page:click": [
      "taskToggle",
      "clickNavigate"
    ],
    "editor:complete": [
      "pageComplete"
    ],
    "page:index": [
      "indexLinks"
    ]
  },
  "functions": {
    "indexLinks": {
      "path": "core/page.ts",
      "code": "(()=>{var r=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var m=a=>r(a,\"__esModule\",{value:!0});var x=(a,e)=>{for(var t in e)r(a,t,{get:e[t],enumerable:!0})},u=(a,e,t,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of k(e))!f.call(a,i)&&(t||i!==\"default\")&&r(a,i,{get:()=>e[i],enumerable:!(o=w(e,i))||o.enumerable});return a};var P=(a=>(e,t)=>a&&a.get(e)||(t=u(m({}),e,1),a&&a.set(e,t),t))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var R={};x(R,{deletePage:()=>h,indexLinks:()=>L,reindex:()=>B,renamePage:()=>v,showBackLinks:()=>b});var p=/\\[\\[([\\w\\s\\/\\:,\\.\\-]+)\\]\\]/;function n(a,...e){let t=Math.floor(Math.random()*1e6);return new Promise((o,i)=>{self.dispatchEvent(new CustomEvent(\"syscall\",{detail:{id:t,name:a,args:e,callback:o}}))})}var y=new RegExp(p,\"g\");async function L({name:a,text:e}){let t=[];for(let o of e.matchAll(y)){let i=o[1],l=o.index;t.push({key:`pl:${i}:${l}`,value:a})}console.log(\"Found\",t.length,\"wiki link(s)\"),await n(\"indexer.batchSet\",a,t)}async function h(){let a=await n(\"editor.getCurrentPage\");console.log(\"Navigating to start page\"),await n(\"editor.navigate\",\"start\"),console.log(\"Deleting page from space\"),await n(\"space.deletePage\",a.name),console.log(\"Reloading page list\"),await n(\"space.reloadPageList\")}async function v(){let e=(await n(\"editor.getCurrentPage\")).name;console.log(\"Old name is\",e);let t=await n(\"editor.prompt\",`Rename ${e} to:`,e);if(!t)return;console.log(\"New name\",t);let o=await d(e);console.log(\"All pages containing backlinks\",o);let i=await n(\"editor.getText\");console.log(\"Writing new page to space\"),await n(\"space.writePage\",t,i),console.log(\"Deleting page from space\"),await n(\"space.deletePage\",e),console.log(\"Reloading page list\"),await n(\"space.reloadPageList\"),console.log(\"Navigating to new page\"),await n(\"editor.navigate\",t);let l=new Set;for(let s of o)l.add(s.page);for(let s of l){console.log(\"Now going to update links in\",s);let{text:g}=await n(\"space.readPage\",s);if(!g)continue;let c=g.replaceAll(`[[${e}]]`,`[[${t}]]`);g!==c&&(console.log(\"Changes made, saving...\"),await n(\"space.writePage\",s,c))}}async function d(a){let e=await n(\"indexer.scanPrefixGlobal\",`pl:${a}:`),t=[];for(let{key:o,value:i}of e){let l=o.split(\":\");t.push({page:i,pos:+l[l.length-1]})}return t}async function b(){let a=await n(\"editor.getCurrentPage\"),e=await d(a.name);console.log(\"Backlinks\",e)}async function B(){await n(\"space.reindex\")}return P(R);})();\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29yZS9wYWdlLnRzIiwgIi4uL3dlYmFwcC9zcmMvY29uc3RhbnQudHMiLCAiY29yZS9saWIvc3lzY2FsbC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgSW5kZXhFdmVudCB9IGZyb20gXCIuLi8uLi93ZWJhcHAvc3JjL2FwcF9ldmVudFwiO1xuaW1wb3J0IHsgcGFnZUxpbmtSZWdleCB9IGZyb20gXCIuLi8uLi93ZWJhcHAvc3JjL2NvbnN0YW50XCI7XG5pbXBvcnQgeyBzeXNjYWxsIH0gZnJvbSBcIi4vbGliL3N5c2NhbGxcIjtcblxuY29uc3Qgd2lraWxpbmtSZWdleCA9IG5ldyBSZWdFeHAocGFnZUxpbmtSZWdleCwgXCJnXCIpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5kZXhMaW5rcyh7IG5hbWUsIHRleHQgfTogSW5kZXhFdmVudCkge1xuICBsZXQgYmFja0xpbmtzOiB7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH1bXSA9IFtdO1xuICBmb3IgKGxldCBtYXRjaCBvZiB0ZXh0Lm1hdGNoQWxsKHdpa2lsaW5rUmVnZXgpKSB7XG4gICAgbGV0IHRvUGFnZSA9IG1hdGNoWzFdO1xuICAgIGxldCBwb3MgPSBtYXRjaC5pbmRleCE7XG4gICAgYmFja0xpbmtzLnB1c2goe1xuICAgICAga2V5OiBgcGw6JHt0b1BhZ2V9OiR7cG9zfWAsXG4gICAgICB2YWx1ZTogbmFtZSxcbiAgICB9KTtcbiAgfVxuICBjb25zb2xlLmxvZyhcIkZvdW5kXCIsIGJhY2tMaW5rcy5sZW5ndGgsIFwid2lraSBsaW5rKHMpXCIpO1xuICBhd2FpdCBzeXNjYWxsKFwiaW5kZXhlci5iYXRjaFNldFwiLCBuYW1lLCBiYWNrTGlua3MpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGFnZSgpIHtcbiAgbGV0IHBhZ2VNZXRhID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRDdXJyZW50UGFnZVwiKTtcbiAgY29uc29sZS5sb2coXCJOYXZpZ2F0aW5nIHRvIHN0YXJ0IHBhZ2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IubmF2aWdhdGVcIiwgXCJzdGFydFwiKTtcbiAgY29uc29sZS5sb2coXCJEZWxldGluZyBwYWdlIGZyb20gc3BhY2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5kZWxldGVQYWdlXCIsIHBhZ2VNZXRhLm5hbWUpO1xuICBjb25zb2xlLmxvZyhcIlJlbG9hZGluZyBwYWdlIGxpc3RcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5yZWxvYWRQYWdlTGlzdFwiKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmFtZVBhZ2UoKSB7XG4gIGNvbnN0IHBhZ2VNZXRhID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRDdXJyZW50UGFnZVwiKTtcbiAgY29uc3Qgb2xkTmFtZSA9IHBhZ2VNZXRhLm5hbWU7XG4gIGNvbnNvbGUubG9nKFwiT2xkIG5hbWUgaXNcIiwgb2xkTmFtZSk7XG4gIGNvbnN0IG5ld05hbWUgPSBhd2FpdCBzeXNjYWxsKFxuICAgIFwiZWRpdG9yLnByb21wdFwiLFxuICAgIGBSZW5hbWUgJHtvbGROYW1lfSB0bzpgLFxuICAgIG9sZE5hbWVcbiAgKTtcbiAgaWYgKCFuZXdOYW1lKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnNvbGUubG9nKFwiTmV3IG5hbWVcIiwgbmV3TmFtZSk7XG5cbiAgbGV0IHBhZ2VzVG9VcGRhdGUgPSBhd2FpdCBnZXRCYWNrTGlua3Mob2xkTmFtZSk7XG4gIGNvbnNvbGUubG9nKFwiQWxsIHBhZ2VzIGNvbnRhaW5pbmcgYmFja2xpbmtzXCIsIHBhZ2VzVG9VcGRhdGUpO1xuXG4gIGxldCB0ZXh0ID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRUZXh0XCIpO1xuICBjb25zb2xlLmxvZyhcIldyaXRpbmcgbmV3IHBhZ2UgdG8gc3BhY2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS53cml0ZVBhZ2VcIiwgbmV3TmFtZSwgdGV4dCk7XG4gIGNvbnNvbGUubG9nKFwiRGVsZXRpbmcgcGFnZSBmcm9tIHNwYWNlXCIpO1xuICBhd2FpdCBzeXNjYWxsKFwic3BhY2UuZGVsZXRlUGFnZVwiLCBvbGROYW1lKTtcbiAgY29uc29sZS5sb2coXCJSZWxvYWRpbmcgcGFnZSBsaXN0XCIpO1xuICBhd2FpdCBzeXNjYWxsKFwic3BhY2UucmVsb2FkUGFnZUxpc3RcIik7XG4gIGNvbnNvbGUubG9nKFwiTmF2aWdhdGluZyB0byBuZXcgcGFnZVwiKTtcbiAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5uYXZpZ2F0ZVwiLCBuZXdOYW1lKTtcblxuICBsZXQgcGFnZVRvVXBkYXRlU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAobGV0IHBhZ2VUb1VwZGF0ZSBvZiBwYWdlc1RvVXBkYXRlKSB7XG4gICAgcGFnZVRvVXBkYXRlU2V0LmFkZChwYWdlVG9VcGRhdGUucGFnZSk7XG4gIH1cblxuICBmb3IgKGxldCBwYWdlVG9VcGRhdGUgb2YgcGFnZVRvVXBkYXRlU2V0KSB7XG4gICAgY29uc29sZS5sb2coXCJOb3cgZ29pbmcgdG8gdXBkYXRlIGxpbmtzIGluXCIsIHBhZ2VUb1VwZGF0ZSk7XG4gICAgbGV0IHsgdGV4dCB9ID0gYXdhaXQgc3lzY2FsbChcInNwYWNlLnJlYWRQYWdlXCIsIHBhZ2VUb1VwZGF0ZSk7XG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICAvLyBQYWdlIGxpa2VseSBkb2VzIG5vdCBleGlzdCwgYnV0IGF0IGxlYXN0IHdlIGNhbiBza2lwIGl0XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgbGV0IG5ld1RleHQgPSB0ZXh0LnJlcGxhY2VBbGwoYFtbJHtvbGROYW1lfV1dYCwgYFtbJHtuZXdOYW1lfV1dYCk7XG4gICAgaWYgKHRleHQgIT09IG5ld1RleHQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ2hhbmdlcyBtYWRlLCBzYXZpbmcuLi5cIik7XG4gICAgICBhd2FpdCBzeXNjYWxsKFwic3BhY2Uud3JpdGVQYWdlXCIsIHBhZ2VUb1VwZGF0ZSwgbmV3VGV4dCk7XG4gICAgfVxuICB9XG59XG5cbnR5cGUgQmFja0xpbmsgPSB7XG4gIHBhZ2U6IHN0cmluZztcbiAgcG9zOiBudW1iZXI7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBnZXRCYWNrTGlua3MocGFnZU5hbWU6IHN0cmluZyk6IFByb21pc2U8QmFja0xpbmtbXT4ge1xuICBsZXQgYWxsQmFja0xpbmtzID0gYXdhaXQgc3lzY2FsbChcbiAgICBcImluZGV4ZXIuc2NhblByZWZpeEdsb2JhbFwiLFxuICAgIGBwbDoke3BhZ2VOYW1lfTpgXG4gICk7XG4gIGxldCBwYWdlc1RvVXBkYXRlOiBCYWNrTGlua1tdID0gW107XG4gIGZvciAobGV0IHsga2V5LCB2YWx1ZSB9IG9mIGFsbEJhY2tMaW5rcykge1xuICAgIGxldCBrZXlQYXJ0cyA9IGtleS5zcGxpdChcIjpcIik7XG4gICAgcGFnZXNUb1VwZGF0ZS5wdXNoKHtcbiAgICAgIHBhZ2U6IHZhbHVlLFxuICAgICAgcG9zOiAra2V5UGFydHNba2V5UGFydHMubGVuZ3RoIC0gMV0sXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHBhZ2VzVG9VcGRhdGU7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93QmFja0xpbmtzKCkge1xuICBjb25zdCBwYWdlTWV0YSA9IGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IuZ2V0Q3VycmVudFBhZ2VcIik7XG4gIGxldCBiYWNrTGlua3MgPSBhd2FpdCBnZXRCYWNrTGlua3MocGFnZU1ldGEubmFtZSk7XG5cbiAgY29uc29sZS5sb2coXCJCYWNrbGlua3NcIiwgYmFja0xpbmtzKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlaW5kZXgoKSB7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5yZWluZGV4XCIpO1xufVxuIiwgImV4cG9ydCBjb25zdCBwYWdlTGlua1JlZ2V4ID0gL1xcW1xcWyhbXFx3XFxzXFwvXFw6LFxcLlxcLV0rKVxcXVxcXS87XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIHN5c2NhbGwobmFtZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IGFueSB7XG4gIGxldCByZXFJZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApO1xuICAvLyBjb25zb2xlLmxvZyhcIlN5c2NhbGxcIiwgbmFtZSwgcmVxSWQpO1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHNlbGYuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudChcInN5c2NhbGxcIiwge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICBpZDogcmVxSWQsXG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBhcmdzOiBhcmdzLFxuICAgICAgICAgIGNhbGxiYWNrOiByZXNvbHZlLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICApO1xuICB9KTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI0aEJBQUEscUdDQU8sR0FBTSxHQUFnQiw2QkNBdEIsV0FBaUIsS0FBaUIsRUFBa0IsQ0FDekQsR0FBSSxHQUFRLEtBQUssTUFBTSxLQUFLLFNBQVcsS0FFdkMsTUFBTyxJQUFJLFNBQVEsQ0FBQyxFQUFTLElBQVcsQ0FDdEMsS0FBSyxjQUNILEdBQUksYUFBWSxVQUFXLENBQ3pCLE9BQVEsQ0FDTixHQUFJLEVBQ0osS0FBTSxFQUNOLEtBQU0sRUFDTixTQUFVLFFGTnBCLEdBQU0sR0FBZ0IsR0FBSSxRQUFPLEVBQWUsS0FFaEQsaUJBQWlDLENBQUUsT0FBTSxRQUFvQixDQUMzRCxHQUFJLEdBQThDLEdBQ2xELE9BQVMsS0FBUyxHQUFLLFNBQVMsR0FBZ0IsQ0FDOUMsR0FBSSxHQUFTLEVBQU0sR0FDZixFQUFNLEVBQU0sTUFDaEIsRUFBVSxLQUFLLENBQ2IsSUFBSyxNQUFNLEtBQVUsSUFDckIsTUFBTyxJQUdYLFFBQVEsSUFBSSxRQUFTLEVBQVUsT0FBUSxnQkFDdkMsS0FBTSxHQUFRLG1CQUFvQixFQUFNLEdBRzFDLGtCQUFtQyxDQUNqQyxHQUFJLEdBQVcsS0FBTSxHQUFRLHlCQUM3QixRQUFRLElBQUksNEJBQ1osS0FBTSxHQUFRLGtCQUFtQixTQUNqQyxRQUFRLElBQUksNEJBQ1osS0FBTSxHQUFRLG1CQUFvQixFQUFTLE1BQzNDLFFBQVEsSUFBSSx1QkFDWixLQUFNLEdBQVEsd0JBR2hCLGtCQUFtQyxDQUVqQyxHQUFNLEdBQVUsQUFEQyxNQUFNLEdBQVEsMEJBQ04sS0FDekIsUUFBUSxJQUFJLGNBQWUsR0FDM0IsR0FBTSxHQUFVLEtBQU0sR0FDcEIsZ0JBQ0EsVUFBVSxRQUNWLEdBRUYsR0FBSSxDQUFDLEVBQ0gsT0FFRixRQUFRLElBQUksV0FBWSxHQUV4QixHQUFJLEdBQWdCLEtBQU0sR0FBYSxHQUN2QyxRQUFRLElBQUksaUNBQWtDLEdBRTlDLEdBQUksR0FBTyxLQUFNLEdBQVEsa0JBQ3pCLFFBQVEsSUFBSSw2QkFDWixLQUFNLEdBQVEsa0JBQW1CLEVBQVMsR0FDMUMsUUFBUSxJQUFJLDRCQUNaLEtBQU0sR0FBUSxtQkFBb0IsR0FDbEMsUUFBUSxJQUFJLHVCQUNaLEtBQU0sR0FBUSx3QkFDZCxRQUFRLElBQUksMEJBQ1osS0FBTSxHQUFRLGtCQUFtQixHQUVqQyxHQUFJLEdBQWtCLEdBQUksS0FDMUIsT0FBUyxLQUFnQixHQUN2QixFQUFnQixJQUFJLEVBQWEsTUFHbkMsT0FBUyxLQUFnQixHQUFpQixDQUN4QyxRQUFRLElBQUksK0JBQWdDLEdBQzVDLEdBQUksQ0FBRSxRQUFTLEtBQU0sR0FBUSxpQkFBa0IsR0FDL0MsR0FBSSxDQUFDLEVBRUgsU0FFRixHQUFJLEdBQVUsRUFBSyxXQUFXLEtBQUssTUFBYSxLQUFLLE9BQ3JELEFBQUksSUFBUyxHQUNYLFNBQVEsSUFBSSwyQkFDWixLQUFNLEdBQVEsa0JBQW1CLEVBQWMsS0FVckQsaUJBQTRCLEVBQXVDLENBQ2pFLEdBQUksR0FBZSxLQUFNLEdBQ3ZCLDJCQUNBLE1BQU0sTUFFSixFQUE0QixHQUNoQyxPQUFTLENBQUUsTUFBSyxVQUFXLEdBQWMsQ0FDdkMsR0FBSSxHQUFXLEVBQUksTUFBTSxLQUN6QixFQUFjLEtBQUssQ0FDakIsS0FBTSxFQUNOLElBQUssQ0FBQyxFQUFTLEVBQVMsT0FBUyxLQUdyQyxNQUFPLEdBR1Qsa0JBQXNDLENBQ3BDLEdBQU0sR0FBVyxLQUFNLEdBQVEseUJBQzNCLEVBQVksS0FBTSxHQUFhLEVBQVMsTUFFNUMsUUFBUSxJQUFJLFlBQWEsR0FHM0Isa0JBQWdDLENBQzlCLEtBQU0sR0FBUSIsCiAgIm5hbWVzIjogW10KfQo=\n",
      "functionName": "indexLinks"
    },
    "deletePage": {
      "path": "core/page.ts",
      "code": "(()=>{var r=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var m=a=>r(a,\"__esModule\",{value:!0});var x=(a,e)=>{for(var t in e)r(a,t,{get:e[t],enumerable:!0})},u=(a,e,t,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of k(e))!f.call(a,i)&&(t||i!==\"default\")&&r(a,i,{get:()=>e[i],enumerable:!(o=w(e,i))||o.enumerable});return a};var P=(a=>(e,t)=>a&&a.get(e)||(t=u(m({}),e,1),a&&a.set(e,t),t))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var R={};x(R,{deletePage:()=>h,indexLinks:()=>L,reindex:()=>B,renamePage:()=>v,showBackLinks:()=>b});var p=/\\[\\[([\\w\\s\\/\\:,\\.\\-]+)\\]\\]/;function n(a,...e){let t=Math.floor(Math.random()*1e6);return new Promise((o,i)=>{self.dispatchEvent(new CustomEvent(\"syscall\",{detail:{id:t,name:a,args:e,callback:o}}))})}var y=new RegExp(p,\"g\");async function L({name:a,text:e}){let t=[];for(let o of e.matchAll(y)){let i=o[1],l=o.index;t.push({key:`pl:${i}:${l}`,value:a})}console.log(\"Found\",t.length,\"wiki link(s)\"),await n(\"indexer.batchSet\",a,t)}async function h(){let a=await n(\"editor.getCurrentPage\");console.log(\"Navigating to start page\"),await n(\"editor.navigate\",\"start\"),console.log(\"Deleting page from space\"),await n(\"space.deletePage\",a.name),console.log(\"Reloading page list\"),await n(\"space.reloadPageList\")}async function v(){let e=(await n(\"editor.getCurrentPage\")).name;console.log(\"Old name is\",e);let t=await n(\"editor.prompt\",`Rename ${e} to:`,e);if(!t)return;console.log(\"New name\",t);let o=await d(e);console.log(\"All pages containing backlinks\",o);let i=await n(\"editor.getText\");console.log(\"Writing new page to space\"),await n(\"space.writePage\",t,i),console.log(\"Deleting page from space\"),await n(\"space.deletePage\",e),console.log(\"Reloading page list\"),await n(\"space.reloadPageList\"),console.log(\"Navigating to new page\"),await n(\"editor.navigate\",t);let l=new Set;for(let s of o)l.add(s.page);for(let s of l){console.log(\"Now going to update links in\",s);let{text:g}=await n(\"space.readPage\",s);if(!g)continue;let c=g.replaceAll(`[[${e}]]`,`[[${t}]]`);g!==c&&(console.log(\"Changes made, saving...\"),await n(\"space.writePage\",s,c))}}async function d(a){let e=await n(\"indexer.scanPrefixGlobal\",`pl:${a}:`),t=[];for(let{key:o,value:i}of e){let l=o.split(\":\");t.push({page:i,pos:+l[l.length-1]})}return t}async function b(){let a=await n(\"editor.getCurrentPage\"),e=await d(a.name);console.log(\"Backlinks\",e)}async function B(){await n(\"space.reindex\")}return P(R);})();\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29yZS9wYWdlLnRzIiwgIi4uL3dlYmFwcC9zcmMvY29uc3RhbnQudHMiLCAiY29yZS9saWIvc3lzY2FsbC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgSW5kZXhFdmVudCB9IGZyb20gXCIuLi8uLi93ZWJhcHAvc3JjL2FwcF9ldmVudFwiO1xuaW1wb3J0IHsgcGFnZUxpbmtSZWdleCB9IGZyb20gXCIuLi8uLi93ZWJhcHAvc3JjL2NvbnN0YW50XCI7XG5pbXBvcnQgeyBzeXNjYWxsIH0gZnJvbSBcIi4vbGliL3N5c2NhbGxcIjtcblxuY29uc3Qgd2lraWxpbmtSZWdleCA9IG5ldyBSZWdFeHAocGFnZUxpbmtSZWdleCwgXCJnXCIpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5kZXhMaW5rcyh7IG5hbWUsIHRleHQgfTogSW5kZXhFdmVudCkge1xuICBsZXQgYmFja0xpbmtzOiB7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH1bXSA9IFtdO1xuICBmb3IgKGxldCBtYXRjaCBvZiB0ZXh0Lm1hdGNoQWxsKHdpa2lsaW5rUmVnZXgpKSB7XG4gICAgbGV0IHRvUGFnZSA9IG1hdGNoWzFdO1xuICAgIGxldCBwb3MgPSBtYXRjaC5pbmRleCE7XG4gICAgYmFja0xpbmtzLnB1c2goe1xuICAgICAga2V5OiBgcGw6JHt0b1BhZ2V9OiR7cG9zfWAsXG4gICAgICB2YWx1ZTogbmFtZSxcbiAgICB9KTtcbiAgfVxuICBjb25zb2xlLmxvZyhcIkZvdW5kXCIsIGJhY2tMaW5rcy5sZW5ndGgsIFwid2lraSBsaW5rKHMpXCIpO1xuICBhd2FpdCBzeXNjYWxsKFwiaW5kZXhlci5iYXRjaFNldFwiLCBuYW1lLCBiYWNrTGlua3MpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGFnZSgpIHtcbiAgbGV0IHBhZ2VNZXRhID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRDdXJyZW50UGFnZVwiKTtcbiAgY29uc29sZS5sb2coXCJOYXZpZ2F0aW5nIHRvIHN0YXJ0IHBhZ2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IubmF2aWdhdGVcIiwgXCJzdGFydFwiKTtcbiAgY29uc29sZS5sb2coXCJEZWxldGluZyBwYWdlIGZyb20gc3BhY2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5kZWxldGVQYWdlXCIsIHBhZ2VNZXRhLm5hbWUpO1xuICBjb25zb2xlLmxvZyhcIlJlbG9hZGluZyBwYWdlIGxpc3RcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5yZWxvYWRQYWdlTGlzdFwiKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmFtZVBhZ2UoKSB7XG4gIGNvbnN0IHBhZ2VNZXRhID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRDdXJyZW50UGFnZVwiKTtcbiAgY29uc3Qgb2xkTmFtZSA9IHBhZ2VNZXRhLm5hbWU7XG4gIGNvbnNvbGUubG9nKFwiT2xkIG5hbWUgaXNcIiwgb2xkTmFtZSk7XG4gIGNvbnN0IG5ld05hbWUgPSBhd2FpdCBzeXNjYWxsKFxuICAgIFwiZWRpdG9yLnByb21wdFwiLFxuICAgIGBSZW5hbWUgJHtvbGROYW1lfSB0bzpgLFxuICAgIG9sZE5hbWVcbiAgKTtcbiAgaWYgKCFuZXdOYW1lKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnNvbGUubG9nKFwiTmV3IG5hbWVcIiwgbmV3TmFtZSk7XG5cbiAgbGV0IHBhZ2VzVG9VcGRhdGUgPSBhd2FpdCBnZXRCYWNrTGlua3Mob2xkTmFtZSk7XG4gIGNvbnNvbGUubG9nKFwiQWxsIHBhZ2VzIGNvbnRhaW5pbmcgYmFja2xpbmtzXCIsIHBhZ2VzVG9VcGRhdGUpO1xuXG4gIGxldCB0ZXh0ID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRUZXh0XCIpO1xuICBjb25zb2xlLmxvZyhcIldyaXRpbmcgbmV3IHBhZ2UgdG8gc3BhY2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS53cml0ZVBhZ2VcIiwgbmV3TmFtZSwgdGV4dCk7XG4gIGNvbnNvbGUubG9nKFwiRGVsZXRpbmcgcGFnZSBmcm9tIHNwYWNlXCIpO1xuICBhd2FpdCBzeXNjYWxsKFwic3BhY2UuZGVsZXRlUGFnZVwiLCBvbGROYW1lKTtcbiAgY29uc29sZS5sb2coXCJSZWxvYWRpbmcgcGFnZSBsaXN0XCIpO1xuICBhd2FpdCBzeXNjYWxsKFwic3BhY2UucmVsb2FkUGFnZUxpc3RcIik7XG4gIGNvbnNvbGUubG9nKFwiTmF2aWdhdGluZyB0byBuZXcgcGFnZVwiKTtcbiAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5uYXZpZ2F0ZVwiLCBuZXdOYW1lKTtcblxuICBsZXQgcGFnZVRvVXBkYXRlU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAobGV0IHBhZ2VUb1VwZGF0ZSBvZiBwYWdlc1RvVXBkYXRlKSB7XG4gICAgcGFnZVRvVXBkYXRlU2V0LmFkZChwYWdlVG9VcGRhdGUucGFnZSk7XG4gIH1cblxuICBmb3IgKGxldCBwYWdlVG9VcGRhdGUgb2YgcGFnZVRvVXBkYXRlU2V0KSB7XG4gICAgY29uc29sZS5sb2coXCJOb3cgZ29pbmcgdG8gdXBkYXRlIGxpbmtzIGluXCIsIHBhZ2VUb1VwZGF0ZSk7XG4gICAgbGV0IHsgdGV4dCB9ID0gYXdhaXQgc3lzY2FsbChcInNwYWNlLnJlYWRQYWdlXCIsIHBhZ2VUb1VwZGF0ZSk7XG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICAvLyBQYWdlIGxpa2VseSBkb2VzIG5vdCBleGlzdCwgYnV0IGF0IGxlYXN0IHdlIGNhbiBza2lwIGl0XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgbGV0IG5ld1RleHQgPSB0ZXh0LnJlcGxhY2VBbGwoYFtbJHtvbGROYW1lfV1dYCwgYFtbJHtuZXdOYW1lfV1dYCk7XG4gICAgaWYgKHRleHQgIT09IG5ld1RleHQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ2hhbmdlcyBtYWRlLCBzYXZpbmcuLi5cIik7XG4gICAgICBhd2FpdCBzeXNjYWxsKFwic3BhY2Uud3JpdGVQYWdlXCIsIHBhZ2VUb1VwZGF0ZSwgbmV3VGV4dCk7XG4gICAgfVxuICB9XG59XG5cbnR5cGUgQmFja0xpbmsgPSB7XG4gIHBhZ2U6IHN0cmluZztcbiAgcG9zOiBudW1iZXI7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBnZXRCYWNrTGlua3MocGFnZU5hbWU6IHN0cmluZyk6IFByb21pc2U8QmFja0xpbmtbXT4ge1xuICBsZXQgYWxsQmFja0xpbmtzID0gYXdhaXQgc3lzY2FsbChcbiAgICBcImluZGV4ZXIuc2NhblByZWZpeEdsb2JhbFwiLFxuICAgIGBwbDoke3BhZ2VOYW1lfTpgXG4gICk7XG4gIGxldCBwYWdlc1RvVXBkYXRlOiBCYWNrTGlua1tdID0gW107XG4gIGZvciAobGV0IHsga2V5LCB2YWx1ZSB9IG9mIGFsbEJhY2tMaW5rcykge1xuICAgIGxldCBrZXlQYXJ0cyA9IGtleS5zcGxpdChcIjpcIik7XG4gICAgcGFnZXNUb1VwZGF0ZS5wdXNoKHtcbiAgICAgIHBhZ2U6IHZhbHVlLFxuICAgICAgcG9zOiAra2V5UGFydHNba2V5UGFydHMubGVuZ3RoIC0gMV0sXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHBhZ2VzVG9VcGRhdGU7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93QmFja0xpbmtzKCkge1xuICBjb25zdCBwYWdlTWV0YSA9IGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IuZ2V0Q3VycmVudFBhZ2VcIik7XG4gIGxldCBiYWNrTGlua3MgPSBhd2FpdCBnZXRCYWNrTGlua3MocGFnZU1ldGEubmFtZSk7XG5cbiAgY29uc29sZS5sb2coXCJCYWNrbGlua3NcIiwgYmFja0xpbmtzKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlaW5kZXgoKSB7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5yZWluZGV4XCIpO1xufVxuIiwgImV4cG9ydCBjb25zdCBwYWdlTGlua1JlZ2V4ID0gL1xcW1xcWyhbXFx3XFxzXFwvXFw6LFxcLlxcLV0rKVxcXVxcXS87XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIHN5c2NhbGwobmFtZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IGFueSB7XG4gIGxldCByZXFJZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApO1xuICAvLyBjb25zb2xlLmxvZyhcIlN5c2NhbGxcIiwgbmFtZSwgcmVxSWQpO1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHNlbGYuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudChcInN5c2NhbGxcIiwge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICBpZDogcmVxSWQsXG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBhcmdzOiBhcmdzLFxuICAgICAgICAgIGNhbGxiYWNrOiByZXNvbHZlLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICApO1xuICB9KTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI0aEJBQUEscUdDQU8sR0FBTSxHQUFnQiw2QkNBdEIsV0FBaUIsS0FBaUIsRUFBa0IsQ0FDekQsR0FBSSxHQUFRLEtBQUssTUFBTSxLQUFLLFNBQVcsS0FFdkMsTUFBTyxJQUFJLFNBQVEsQ0FBQyxFQUFTLElBQVcsQ0FDdEMsS0FBSyxjQUNILEdBQUksYUFBWSxVQUFXLENBQ3pCLE9BQVEsQ0FDTixHQUFJLEVBQ0osS0FBTSxFQUNOLEtBQU0sRUFDTixTQUFVLFFGTnBCLEdBQU0sR0FBZ0IsR0FBSSxRQUFPLEVBQWUsS0FFaEQsaUJBQWlDLENBQUUsT0FBTSxRQUFvQixDQUMzRCxHQUFJLEdBQThDLEdBQ2xELE9BQVMsS0FBUyxHQUFLLFNBQVMsR0FBZ0IsQ0FDOUMsR0FBSSxHQUFTLEVBQU0sR0FDZixFQUFNLEVBQU0sTUFDaEIsRUFBVSxLQUFLLENBQ2IsSUFBSyxNQUFNLEtBQVUsSUFDckIsTUFBTyxJQUdYLFFBQVEsSUFBSSxRQUFTLEVBQVUsT0FBUSxnQkFDdkMsS0FBTSxHQUFRLG1CQUFvQixFQUFNLEdBRzFDLGtCQUFtQyxDQUNqQyxHQUFJLEdBQVcsS0FBTSxHQUFRLHlCQUM3QixRQUFRLElBQUksNEJBQ1osS0FBTSxHQUFRLGtCQUFtQixTQUNqQyxRQUFRLElBQUksNEJBQ1osS0FBTSxHQUFRLG1CQUFvQixFQUFTLE1BQzNDLFFBQVEsSUFBSSx1QkFDWixLQUFNLEdBQVEsd0JBR2hCLGtCQUFtQyxDQUVqQyxHQUFNLEdBQVUsQUFEQyxNQUFNLEdBQVEsMEJBQ04sS0FDekIsUUFBUSxJQUFJLGNBQWUsR0FDM0IsR0FBTSxHQUFVLEtBQU0sR0FDcEIsZ0JBQ0EsVUFBVSxRQUNWLEdBRUYsR0FBSSxDQUFDLEVBQ0gsT0FFRixRQUFRLElBQUksV0FBWSxHQUV4QixHQUFJLEdBQWdCLEtBQU0sR0FBYSxHQUN2QyxRQUFRLElBQUksaUNBQWtDLEdBRTlDLEdBQUksR0FBTyxLQUFNLEdBQVEsa0JBQ3pCLFFBQVEsSUFBSSw2QkFDWixLQUFNLEdBQVEsa0JBQW1CLEVBQVMsR0FDMUMsUUFBUSxJQUFJLDRCQUNaLEtBQU0sR0FBUSxtQkFBb0IsR0FDbEMsUUFBUSxJQUFJLHVCQUNaLEtBQU0sR0FBUSx3QkFDZCxRQUFRLElBQUksMEJBQ1osS0FBTSxHQUFRLGtCQUFtQixHQUVqQyxHQUFJLEdBQWtCLEdBQUksS0FDMUIsT0FBUyxLQUFnQixHQUN2QixFQUFnQixJQUFJLEVBQWEsTUFHbkMsT0FBUyxLQUFnQixHQUFpQixDQUN4QyxRQUFRLElBQUksK0JBQWdDLEdBQzVDLEdBQUksQ0FBRSxRQUFTLEtBQU0sR0FBUSxpQkFBa0IsR0FDL0MsR0FBSSxDQUFDLEVBRUgsU0FFRixHQUFJLEdBQVUsRUFBSyxXQUFXLEtBQUssTUFBYSxLQUFLLE9BQ3JELEFBQUksSUFBUyxHQUNYLFNBQVEsSUFBSSwyQkFDWixLQUFNLEdBQVEsa0JBQW1CLEVBQWMsS0FVckQsaUJBQTRCLEVBQXVDLENBQ2pFLEdBQUksR0FBZSxLQUFNLEdBQ3ZCLDJCQUNBLE1BQU0sTUFFSixFQUE0QixHQUNoQyxPQUFTLENBQUUsTUFBSyxVQUFXLEdBQWMsQ0FDdkMsR0FBSSxHQUFXLEVBQUksTUFBTSxLQUN6QixFQUFjLEtBQUssQ0FDakIsS0FBTSxFQUNOLElBQUssQ0FBQyxFQUFTLEVBQVMsT0FBUyxLQUdyQyxNQUFPLEdBR1Qsa0JBQXNDLENBQ3BDLEdBQU0sR0FBVyxLQUFNLEdBQVEseUJBQzNCLEVBQVksS0FBTSxHQUFhLEVBQVMsTUFFNUMsUUFBUSxJQUFJLFlBQWEsR0FHM0Isa0JBQWdDLENBQzlCLEtBQU0sR0FBUSIsCiAgIm5hbWVzIjogW10KfQo=\n",
      "functionName": "deletePage"
    },
    "showBackLinks": {
      "path": "core/page.ts",
      "code": "(()=>{var r=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var m=a=>r(a,\"__esModule\",{value:!0});var x=(a,e)=>{for(var t in e)r(a,t,{get:e[t],enumerable:!0})},u=(a,e,t,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of k(e))!f.call(a,i)&&(t||i!==\"default\")&&r(a,i,{get:()=>e[i],enumerable:!(o=w(e,i))||o.enumerable});return a};var P=(a=>(e,t)=>a&&a.get(e)||(t=u(m({}),e,1),a&&a.set(e,t),t))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var R={};x(R,{deletePage:()=>h,indexLinks:()=>L,reindex:()=>B,renamePage:()=>v,showBackLinks:()=>b});var p=/\\[\\[([\\w\\s\\/\\:,\\.\\-]+)\\]\\]/;function n(a,...e){let t=Math.floor(Math.random()*1e6);return new Promise((o,i)=>{self.dispatchEvent(new CustomEvent(\"syscall\",{detail:{id:t,name:a,args:e,callback:o}}))})}var y=new RegExp(p,\"g\");async function L({name:a,text:e}){let t=[];for(let o of e.matchAll(y)){let i=o[1],l=o.index;t.push({key:`pl:${i}:${l}`,value:a})}console.log(\"Found\",t.length,\"wiki link(s)\"),await n(\"indexer.batchSet\",a,t)}async function h(){let a=await n(\"editor.getCurrentPage\");console.log(\"Navigating to start page\"),await n(\"editor.navigate\",\"start\"),console.log(\"Deleting page from space\"),await n(\"space.deletePage\",a.name),console.log(\"Reloading page list\"),await n(\"space.reloadPageList\")}async function v(){let e=(await n(\"editor.getCurrentPage\")).name;console.log(\"Old name is\",e);let t=await n(\"editor.prompt\",`Rename ${e} to:`,e);if(!t)return;console.log(\"New name\",t);let o=await d(e);console.log(\"All pages containing backlinks\",o);let i=await n(\"editor.getText\");console.log(\"Writing new page to space\"),await n(\"space.writePage\",t,i),console.log(\"Deleting page from space\"),await n(\"space.deletePage\",e),console.log(\"Reloading page list\"),await n(\"space.reloadPageList\"),console.log(\"Navigating to new page\"),await n(\"editor.navigate\",t);let l=new Set;for(let s of o)l.add(s.page);for(let s of l){console.log(\"Now going to update links in\",s);let{text:g}=await n(\"space.readPage\",s);if(!g)continue;let c=g.replaceAll(`[[${e}]]`,`[[${t}]]`);g!==c&&(console.log(\"Changes made, saving...\"),await n(\"space.writePage\",s,c))}}async function d(a){let e=await n(\"indexer.scanPrefixGlobal\",`pl:${a}:`),t=[];for(let{key:o,value:i}of e){let l=o.split(\":\");t.push({page:i,pos:+l[l.length-1]})}return t}async function b(){let a=await n(\"editor.getCurrentPage\"),e=await d(a.name);console.log(\"Backlinks\",e)}async function B(){await n(\"space.reindex\")}return P(R);})();\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29yZS9wYWdlLnRzIiwgIi4uL3dlYmFwcC9zcmMvY29uc3RhbnQudHMiLCAiY29yZS9saWIvc3lzY2FsbC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgSW5kZXhFdmVudCB9IGZyb20gXCIuLi8uLi93ZWJhcHAvc3JjL2FwcF9ldmVudFwiO1xuaW1wb3J0IHsgcGFnZUxpbmtSZWdleCB9IGZyb20gXCIuLi8uLi93ZWJhcHAvc3JjL2NvbnN0YW50XCI7XG5pbXBvcnQgeyBzeXNjYWxsIH0gZnJvbSBcIi4vbGliL3N5c2NhbGxcIjtcblxuY29uc3Qgd2lraWxpbmtSZWdleCA9IG5ldyBSZWdFeHAocGFnZUxpbmtSZWdleCwgXCJnXCIpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5kZXhMaW5rcyh7IG5hbWUsIHRleHQgfTogSW5kZXhFdmVudCkge1xuICBsZXQgYmFja0xpbmtzOiB7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH1bXSA9IFtdO1xuICBmb3IgKGxldCBtYXRjaCBvZiB0ZXh0Lm1hdGNoQWxsKHdpa2lsaW5rUmVnZXgpKSB7XG4gICAgbGV0IHRvUGFnZSA9IG1hdGNoWzFdO1xuICAgIGxldCBwb3MgPSBtYXRjaC5pbmRleCE7XG4gICAgYmFja0xpbmtzLnB1c2goe1xuICAgICAga2V5OiBgcGw6JHt0b1BhZ2V9OiR7cG9zfWAsXG4gICAgICB2YWx1ZTogbmFtZSxcbiAgICB9KTtcbiAgfVxuICBjb25zb2xlLmxvZyhcIkZvdW5kXCIsIGJhY2tMaW5rcy5sZW5ndGgsIFwid2lraSBsaW5rKHMpXCIpO1xuICBhd2FpdCBzeXNjYWxsKFwiaW5kZXhlci5iYXRjaFNldFwiLCBuYW1lLCBiYWNrTGlua3MpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGFnZSgpIHtcbiAgbGV0IHBhZ2VNZXRhID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRDdXJyZW50UGFnZVwiKTtcbiAgY29uc29sZS5sb2coXCJOYXZpZ2F0aW5nIHRvIHN0YXJ0IHBhZ2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IubmF2aWdhdGVcIiwgXCJzdGFydFwiKTtcbiAgY29uc29sZS5sb2coXCJEZWxldGluZyBwYWdlIGZyb20gc3BhY2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5kZWxldGVQYWdlXCIsIHBhZ2VNZXRhLm5hbWUpO1xuICBjb25zb2xlLmxvZyhcIlJlbG9hZGluZyBwYWdlIGxpc3RcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5yZWxvYWRQYWdlTGlzdFwiKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmFtZVBhZ2UoKSB7XG4gIGNvbnN0IHBhZ2VNZXRhID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRDdXJyZW50UGFnZVwiKTtcbiAgY29uc3Qgb2xkTmFtZSA9IHBhZ2VNZXRhLm5hbWU7XG4gIGNvbnNvbGUubG9nKFwiT2xkIG5hbWUgaXNcIiwgb2xkTmFtZSk7XG4gIGNvbnN0IG5ld05hbWUgPSBhd2FpdCBzeXNjYWxsKFxuICAgIFwiZWRpdG9yLnByb21wdFwiLFxuICAgIGBSZW5hbWUgJHtvbGROYW1lfSB0bzpgLFxuICAgIG9sZE5hbWVcbiAgKTtcbiAgaWYgKCFuZXdOYW1lKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnNvbGUubG9nKFwiTmV3IG5hbWVcIiwgbmV3TmFtZSk7XG5cbiAgbGV0IHBhZ2VzVG9VcGRhdGUgPSBhd2FpdCBnZXRCYWNrTGlua3Mob2xkTmFtZSk7XG4gIGNvbnNvbGUubG9nKFwiQWxsIHBhZ2VzIGNvbnRhaW5pbmcgYmFja2xpbmtzXCIsIHBhZ2VzVG9VcGRhdGUpO1xuXG4gIGxldCB0ZXh0ID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRUZXh0XCIpO1xuICBjb25zb2xlLmxvZyhcIldyaXRpbmcgbmV3IHBhZ2UgdG8gc3BhY2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS53cml0ZVBhZ2VcIiwgbmV3TmFtZSwgdGV4dCk7XG4gIGNvbnNvbGUubG9nKFwiRGVsZXRpbmcgcGFnZSBmcm9tIHNwYWNlXCIpO1xuICBhd2FpdCBzeXNjYWxsKFwic3BhY2UuZGVsZXRlUGFnZVwiLCBvbGROYW1lKTtcbiAgY29uc29sZS5sb2coXCJSZWxvYWRpbmcgcGFnZSBsaXN0XCIpO1xuICBhd2FpdCBzeXNjYWxsKFwic3BhY2UucmVsb2FkUGFnZUxpc3RcIik7XG4gIGNvbnNvbGUubG9nKFwiTmF2aWdhdGluZyB0byBuZXcgcGFnZVwiKTtcbiAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5uYXZpZ2F0ZVwiLCBuZXdOYW1lKTtcblxuICBsZXQgcGFnZVRvVXBkYXRlU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAobGV0IHBhZ2VUb1VwZGF0ZSBvZiBwYWdlc1RvVXBkYXRlKSB7XG4gICAgcGFnZVRvVXBkYXRlU2V0LmFkZChwYWdlVG9VcGRhdGUucGFnZSk7XG4gIH1cblxuICBmb3IgKGxldCBwYWdlVG9VcGRhdGUgb2YgcGFnZVRvVXBkYXRlU2V0KSB7XG4gICAgY29uc29sZS5sb2coXCJOb3cgZ29pbmcgdG8gdXBkYXRlIGxpbmtzIGluXCIsIHBhZ2VUb1VwZGF0ZSk7XG4gICAgbGV0IHsgdGV4dCB9ID0gYXdhaXQgc3lzY2FsbChcInNwYWNlLnJlYWRQYWdlXCIsIHBhZ2VUb1VwZGF0ZSk7XG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICAvLyBQYWdlIGxpa2VseSBkb2VzIG5vdCBleGlzdCwgYnV0IGF0IGxlYXN0IHdlIGNhbiBza2lwIGl0XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgbGV0IG5ld1RleHQgPSB0ZXh0LnJlcGxhY2VBbGwoYFtbJHtvbGROYW1lfV1dYCwgYFtbJHtuZXdOYW1lfV1dYCk7XG4gICAgaWYgKHRleHQgIT09IG5ld1RleHQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ2hhbmdlcyBtYWRlLCBzYXZpbmcuLi5cIik7XG4gICAgICBhd2FpdCBzeXNjYWxsKFwic3BhY2Uud3JpdGVQYWdlXCIsIHBhZ2VUb1VwZGF0ZSwgbmV3VGV4dCk7XG4gICAgfVxuICB9XG59XG5cbnR5cGUgQmFja0xpbmsgPSB7XG4gIHBhZ2U6IHN0cmluZztcbiAgcG9zOiBudW1iZXI7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBnZXRCYWNrTGlua3MocGFnZU5hbWU6IHN0cmluZyk6IFByb21pc2U8QmFja0xpbmtbXT4ge1xuICBsZXQgYWxsQmFja0xpbmtzID0gYXdhaXQgc3lzY2FsbChcbiAgICBcImluZGV4ZXIuc2NhblByZWZpeEdsb2JhbFwiLFxuICAgIGBwbDoke3BhZ2VOYW1lfTpgXG4gICk7XG4gIGxldCBwYWdlc1RvVXBkYXRlOiBCYWNrTGlua1tdID0gW107XG4gIGZvciAobGV0IHsga2V5LCB2YWx1ZSB9IG9mIGFsbEJhY2tMaW5rcykge1xuICAgIGxldCBrZXlQYXJ0cyA9IGtleS5zcGxpdChcIjpcIik7XG4gICAgcGFnZXNUb1VwZGF0ZS5wdXNoKHtcbiAgICAgIHBhZ2U6IHZhbHVlLFxuICAgICAgcG9zOiAra2V5UGFydHNba2V5UGFydHMubGVuZ3RoIC0gMV0sXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHBhZ2VzVG9VcGRhdGU7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93QmFja0xpbmtzKCkge1xuICBjb25zdCBwYWdlTWV0YSA9IGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IuZ2V0Q3VycmVudFBhZ2VcIik7XG4gIGxldCBiYWNrTGlua3MgPSBhd2FpdCBnZXRCYWNrTGlua3MocGFnZU1ldGEubmFtZSk7XG5cbiAgY29uc29sZS5sb2coXCJCYWNrbGlua3NcIiwgYmFja0xpbmtzKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlaW5kZXgoKSB7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5yZWluZGV4XCIpO1xufVxuIiwgImV4cG9ydCBjb25zdCBwYWdlTGlua1JlZ2V4ID0gL1xcW1xcWyhbXFx3XFxzXFwvXFw6LFxcLlxcLV0rKVxcXVxcXS87XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIHN5c2NhbGwobmFtZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IGFueSB7XG4gIGxldCByZXFJZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApO1xuICAvLyBjb25zb2xlLmxvZyhcIlN5c2NhbGxcIiwgbmFtZSwgcmVxSWQpO1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHNlbGYuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudChcInN5c2NhbGxcIiwge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICBpZDogcmVxSWQsXG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBhcmdzOiBhcmdzLFxuICAgICAgICAgIGNhbGxiYWNrOiByZXNvbHZlLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICApO1xuICB9KTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI0aEJBQUEscUdDQU8sR0FBTSxHQUFnQiw2QkNBdEIsV0FBaUIsS0FBaUIsRUFBa0IsQ0FDekQsR0FBSSxHQUFRLEtBQUssTUFBTSxLQUFLLFNBQVcsS0FFdkMsTUFBTyxJQUFJLFNBQVEsQ0FBQyxFQUFTLElBQVcsQ0FDdEMsS0FBSyxjQUNILEdBQUksYUFBWSxVQUFXLENBQ3pCLE9BQVEsQ0FDTixHQUFJLEVBQ0osS0FBTSxFQUNOLEtBQU0sRUFDTixTQUFVLFFGTnBCLEdBQU0sR0FBZ0IsR0FBSSxRQUFPLEVBQWUsS0FFaEQsaUJBQWlDLENBQUUsT0FBTSxRQUFvQixDQUMzRCxHQUFJLEdBQThDLEdBQ2xELE9BQVMsS0FBUyxHQUFLLFNBQVMsR0FBZ0IsQ0FDOUMsR0FBSSxHQUFTLEVBQU0sR0FDZixFQUFNLEVBQU0sTUFDaEIsRUFBVSxLQUFLLENBQ2IsSUFBSyxNQUFNLEtBQVUsSUFDckIsTUFBTyxJQUdYLFFBQVEsSUFBSSxRQUFTLEVBQVUsT0FBUSxnQkFDdkMsS0FBTSxHQUFRLG1CQUFvQixFQUFNLEdBRzFDLGtCQUFtQyxDQUNqQyxHQUFJLEdBQVcsS0FBTSxHQUFRLHlCQUM3QixRQUFRLElBQUksNEJBQ1osS0FBTSxHQUFRLGtCQUFtQixTQUNqQyxRQUFRLElBQUksNEJBQ1osS0FBTSxHQUFRLG1CQUFvQixFQUFTLE1BQzNDLFFBQVEsSUFBSSx1QkFDWixLQUFNLEdBQVEsd0JBR2hCLGtCQUFtQyxDQUVqQyxHQUFNLEdBQVUsQUFEQyxNQUFNLEdBQVEsMEJBQ04sS0FDekIsUUFBUSxJQUFJLGNBQWUsR0FDM0IsR0FBTSxHQUFVLEtBQU0sR0FDcEIsZ0JBQ0EsVUFBVSxRQUNWLEdBRUYsR0FBSSxDQUFDLEVBQ0gsT0FFRixRQUFRLElBQUksV0FBWSxHQUV4QixHQUFJLEdBQWdCLEtBQU0sR0FBYSxHQUN2QyxRQUFRLElBQUksaUNBQWtDLEdBRTlDLEdBQUksR0FBTyxLQUFNLEdBQVEsa0JBQ3pCLFFBQVEsSUFBSSw2QkFDWixLQUFNLEdBQVEsa0JBQW1CLEVBQVMsR0FDMUMsUUFBUSxJQUFJLDRCQUNaLEtBQU0sR0FBUSxtQkFBb0IsR0FDbEMsUUFBUSxJQUFJLHVCQUNaLEtBQU0sR0FBUSx3QkFDZCxRQUFRLElBQUksMEJBQ1osS0FBTSxHQUFRLGtCQUFtQixHQUVqQyxHQUFJLEdBQWtCLEdBQUksS0FDMUIsT0FBUyxLQUFnQixHQUN2QixFQUFnQixJQUFJLEVBQWEsTUFHbkMsT0FBUyxLQUFnQixHQUFpQixDQUN4QyxRQUFRLElBQUksK0JBQWdDLEdBQzVDLEdBQUksQ0FBRSxRQUFTLEtBQU0sR0FBUSxpQkFBa0IsR0FDL0MsR0FBSSxDQUFDLEVBRUgsU0FFRixHQUFJLEdBQVUsRUFBSyxXQUFXLEtBQUssTUFBYSxLQUFLLE9BQ3JELEFBQUksSUFBUyxHQUNYLFNBQVEsSUFBSSwyQkFDWixLQUFNLEdBQVEsa0JBQW1CLEVBQWMsS0FVckQsaUJBQTRCLEVBQXVDLENBQ2pFLEdBQUksR0FBZSxLQUFNLEdBQ3ZCLDJCQUNBLE1BQU0sTUFFSixFQUE0QixHQUNoQyxPQUFTLENBQUUsTUFBSyxVQUFXLEdBQWMsQ0FDdkMsR0FBSSxHQUFXLEVBQUksTUFBTSxLQUN6QixFQUFjLEtBQUssQ0FDakIsS0FBTSxFQUNOLElBQUssQ0FBQyxFQUFTLEVBQVMsT0FBUyxLQUdyQyxNQUFPLEdBR1Qsa0JBQXNDLENBQ3BDLEdBQU0sR0FBVyxLQUFNLEdBQVEseUJBQzNCLEVBQVksS0FBTSxHQUFhLEVBQVMsTUFFNUMsUUFBUSxJQUFJLFlBQWEsR0FHM0Isa0JBQWdDLENBQzlCLEtBQU0sR0FBUSIsCiAgIm5hbWVzIjogW10KfQo=\n",
      "functionName": "showBackLinks"
    },
    "renamePage": {
      "path": "core/page.ts",
      "code": "(()=>{var r=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var m=a=>r(a,\"__esModule\",{value:!0});var x=(a,e)=>{for(var t in e)r(a,t,{get:e[t],enumerable:!0})},u=(a,e,t,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of k(e))!f.call(a,i)&&(t||i!==\"default\")&&r(a,i,{get:()=>e[i],enumerable:!(o=w(e,i))||o.enumerable});return a};var P=(a=>(e,t)=>a&&a.get(e)||(t=u(m({}),e,1),a&&a.set(e,t),t))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var R={};x(R,{deletePage:()=>h,indexLinks:()=>L,reindex:()=>B,renamePage:()=>v,showBackLinks:()=>b});var p=/\\[\\[([\\w\\s\\/\\:,\\.\\-]+)\\]\\]/;function n(a,...e){let t=Math.floor(Math.random()*1e6);return new Promise((o,i)=>{self.dispatchEvent(new CustomEvent(\"syscall\",{detail:{id:t,name:a,args:e,callback:o}}))})}var y=new RegExp(p,\"g\");async function L({name:a,text:e}){let t=[];for(let o of e.matchAll(y)){let i=o[1],l=o.index;t.push({key:`pl:${i}:${l}`,value:a})}console.log(\"Found\",t.length,\"wiki link(s)\"),await n(\"indexer.batchSet\",a,t)}async function h(){let a=await n(\"editor.getCurrentPage\");console.log(\"Navigating to start page\"),await n(\"editor.navigate\",\"start\"),console.log(\"Deleting page from space\"),await n(\"space.deletePage\",a.name),console.log(\"Reloading page list\"),await n(\"space.reloadPageList\")}async function v(){let e=(await n(\"editor.getCurrentPage\")).name;console.log(\"Old name is\",e);let t=await n(\"editor.prompt\",`Rename ${e} to:`,e);if(!t)return;console.log(\"New name\",t);let o=await d(e);console.log(\"All pages containing backlinks\",o);let i=await n(\"editor.getText\");console.log(\"Writing new page to space\"),await n(\"space.writePage\",t,i),console.log(\"Deleting page from space\"),await n(\"space.deletePage\",e),console.log(\"Reloading page list\"),await n(\"space.reloadPageList\"),console.log(\"Navigating to new page\"),await n(\"editor.navigate\",t);let l=new Set;for(let s of o)l.add(s.page);for(let s of l){console.log(\"Now going to update links in\",s);let{text:g}=await n(\"space.readPage\",s);if(!g)continue;let c=g.replaceAll(`[[${e}]]`,`[[${t}]]`);g!==c&&(console.log(\"Changes made, saving...\"),await n(\"space.writePage\",s,c))}}async function d(a){let e=await n(\"indexer.scanPrefixGlobal\",`pl:${a}:`),t=[];for(let{key:o,value:i}of e){let l=o.split(\":\");t.push({page:i,pos:+l[l.length-1]})}return t}async function b(){let a=await n(\"editor.getCurrentPage\"),e=await d(a.name);console.log(\"Backlinks\",e)}async function B(){await n(\"space.reindex\")}return P(R);})();\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29yZS9wYWdlLnRzIiwgIi4uL3dlYmFwcC9zcmMvY29uc3RhbnQudHMiLCAiY29yZS9saWIvc3lzY2FsbC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgSW5kZXhFdmVudCB9IGZyb20gXCIuLi8uLi93ZWJhcHAvc3JjL2FwcF9ldmVudFwiO1xuaW1wb3J0IHsgcGFnZUxpbmtSZWdleCB9IGZyb20gXCIuLi8uLi93ZWJhcHAvc3JjL2NvbnN0YW50XCI7XG5pbXBvcnQgeyBzeXNjYWxsIH0gZnJvbSBcIi4vbGliL3N5c2NhbGxcIjtcblxuY29uc3Qgd2lraWxpbmtSZWdleCA9IG5ldyBSZWdFeHAocGFnZUxpbmtSZWdleCwgXCJnXCIpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5kZXhMaW5rcyh7IG5hbWUsIHRleHQgfTogSW5kZXhFdmVudCkge1xuICBsZXQgYmFja0xpbmtzOiB7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH1bXSA9IFtdO1xuICBmb3IgKGxldCBtYXRjaCBvZiB0ZXh0Lm1hdGNoQWxsKHdpa2lsaW5rUmVnZXgpKSB7XG4gICAgbGV0IHRvUGFnZSA9IG1hdGNoWzFdO1xuICAgIGxldCBwb3MgPSBtYXRjaC5pbmRleCE7XG4gICAgYmFja0xpbmtzLnB1c2goe1xuICAgICAga2V5OiBgcGw6JHt0b1BhZ2V9OiR7cG9zfWAsXG4gICAgICB2YWx1ZTogbmFtZSxcbiAgICB9KTtcbiAgfVxuICBjb25zb2xlLmxvZyhcIkZvdW5kXCIsIGJhY2tMaW5rcy5sZW5ndGgsIFwid2lraSBsaW5rKHMpXCIpO1xuICBhd2FpdCBzeXNjYWxsKFwiaW5kZXhlci5iYXRjaFNldFwiLCBuYW1lLCBiYWNrTGlua3MpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGFnZSgpIHtcbiAgbGV0IHBhZ2VNZXRhID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRDdXJyZW50UGFnZVwiKTtcbiAgY29uc29sZS5sb2coXCJOYXZpZ2F0aW5nIHRvIHN0YXJ0IHBhZ2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IubmF2aWdhdGVcIiwgXCJzdGFydFwiKTtcbiAgY29uc29sZS5sb2coXCJEZWxldGluZyBwYWdlIGZyb20gc3BhY2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5kZWxldGVQYWdlXCIsIHBhZ2VNZXRhLm5hbWUpO1xuICBjb25zb2xlLmxvZyhcIlJlbG9hZGluZyBwYWdlIGxpc3RcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5yZWxvYWRQYWdlTGlzdFwiKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmFtZVBhZ2UoKSB7XG4gIGNvbnN0IHBhZ2VNZXRhID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRDdXJyZW50UGFnZVwiKTtcbiAgY29uc3Qgb2xkTmFtZSA9IHBhZ2VNZXRhLm5hbWU7XG4gIGNvbnNvbGUubG9nKFwiT2xkIG5hbWUgaXNcIiwgb2xkTmFtZSk7XG4gIGNvbnN0IG5ld05hbWUgPSBhd2FpdCBzeXNjYWxsKFxuICAgIFwiZWRpdG9yLnByb21wdFwiLFxuICAgIGBSZW5hbWUgJHtvbGROYW1lfSB0bzpgLFxuICAgIG9sZE5hbWVcbiAgKTtcbiAgaWYgKCFuZXdOYW1lKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnNvbGUubG9nKFwiTmV3IG5hbWVcIiwgbmV3TmFtZSk7XG5cbiAgbGV0IHBhZ2VzVG9VcGRhdGUgPSBhd2FpdCBnZXRCYWNrTGlua3Mob2xkTmFtZSk7XG4gIGNvbnNvbGUubG9nKFwiQWxsIHBhZ2VzIGNvbnRhaW5pbmcgYmFja2xpbmtzXCIsIHBhZ2VzVG9VcGRhdGUpO1xuXG4gIGxldCB0ZXh0ID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRUZXh0XCIpO1xuICBjb25zb2xlLmxvZyhcIldyaXRpbmcgbmV3IHBhZ2UgdG8gc3BhY2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS53cml0ZVBhZ2VcIiwgbmV3TmFtZSwgdGV4dCk7XG4gIGNvbnNvbGUubG9nKFwiRGVsZXRpbmcgcGFnZSBmcm9tIHNwYWNlXCIpO1xuICBhd2FpdCBzeXNjYWxsKFwic3BhY2UuZGVsZXRlUGFnZVwiLCBvbGROYW1lKTtcbiAgY29uc29sZS5sb2coXCJSZWxvYWRpbmcgcGFnZSBsaXN0XCIpO1xuICBhd2FpdCBzeXNjYWxsKFwic3BhY2UucmVsb2FkUGFnZUxpc3RcIik7XG4gIGNvbnNvbGUubG9nKFwiTmF2aWdhdGluZyB0byBuZXcgcGFnZVwiKTtcbiAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5uYXZpZ2F0ZVwiLCBuZXdOYW1lKTtcblxuICBsZXQgcGFnZVRvVXBkYXRlU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAobGV0IHBhZ2VUb1VwZGF0ZSBvZiBwYWdlc1RvVXBkYXRlKSB7XG4gICAgcGFnZVRvVXBkYXRlU2V0LmFkZChwYWdlVG9VcGRhdGUucGFnZSk7XG4gIH1cblxuICBmb3IgKGxldCBwYWdlVG9VcGRhdGUgb2YgcGFnZVRvVXBkYXRlU2V0KSB7XG4gICAgY29uc29sZS5sb2coXCJOb3cgZ29pbmcgdG8gdXBkYXRlIGxpbmtzIGluXCIsIHBhZ2VUb1VwZGF0ZSk7XG4gICAgbGV0IHsgdGV4dCB9ID0gYXdhaXQgc3lzY2FsbChcInNwYWNlLnJlYWRQYWdlXCIsIHBhZ2VUb1VwZGF0ZSk7XG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICAvLyBQYWdlIGxpa2VseSBkb2VzIG5vdCBleGlzdCwgYnV0IGF0IGxlYXN0IHdlIGNhbiBza2lwIGl0XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgbGV0IG5ld1RleHQgPSB0ZXh0LnJlcGxhY2VBbGwoYFtbJHtvbGROYW1lfV1dYCwgYFtbJHtuZXdOYW1lfV1dYCk7XG4gICAgaWYgKHRleHQgIT09IG5ld1RleHQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ2hhbmdlcyBtYWRlLCBzYXZpbmcuLi5cIik7XG4gICAgICBhd2FpdCBzeXNjYWxsKFwic3BhY2Uud3JpdGVQYWdlXCIsIHBhZ2VUb1VwZGF0ZSwgbmV3VGV4dCk7XG4gICAgfVxuICB9XG59XG5cbnR5cGUgQmFja0xpbmsgPSB7XG4gIHBhZ2U6IHN0cmluZztcbiAgcG9zOiBudW1iZXI7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBnZXRCYWNrTGlua3MocGFnZU5hbWU6IHN0cmluZyk6IFByb21pc2U8QmFja0xpbmtbXT4ge1xuICBsZXQgYWxsQmFja0xpbmtzID0gYXdhaXQgc3lzY2FsbChcbiAgICBcImluZGV4ZXIuc2NhblByZWZpeEdsb2JhbFwiLFxuICAgIGBwbDoke3BhZ2VOYW1lfTpgXG4gICk7XG4gIGxldCBwYWdlc1RvVXBkYXRlOiBCYWNrTGlua1tdID0gW107XG4gIGZvciAobGV0IHsga2V5LCB2YWx1ZSB9IG9mIGFsbEJhY2tMaW5rcykge1xuICAgIGxldCBrZXlQYXJ0cyA9IGtleS5zcGxpdChcIjpcIik7XG4gICAgcGFnZXNUb1VwZGF0ZS5wdXNoKHtcbiAgICAgIHBhZ2U6IHZhbHVlLFxuICAgICAgcG9zOiAra2V5UGFydHNba2V5UGFydHMubGVuZ3RoIC0gMV0sXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHBhZ2VzVG9VcGRhdGU7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93QmFja0xpbmtzKCkge1xuICBjb25zdCBwYWdlTWV0YSA9IGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IuZ2V0Q3VycmVudFBhZ2VcIik7XG4gIGxldCBiYWNrTGlua3MgPSBhd2FpdCBnZXRCYWNrTGlua3MocGFnZU1ldGEubmFtZSk7XG5cbiAgY29uc29sZS5sb2coXCJCYWNrbGlua3NcIiwgYmFja0xpbmtzKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlaW5kZXgoKSB7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5yZWluZGV4XCIpO1xufVxuIiwgImV4cG9ydCBjb25zdCBwYWdlTGlua1JlZ2V4ID0gL1xcW1xcWyhbXFx3XFxzXFwvXFw6LFxcLlxcLV0rKVxcXVxcXS87XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIHN5c2NhbGwobmFtZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IGFueSB7XG4gIGxldCByZXFJZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApO1xuICAvLyBjb25zb2xlLmxvZyhcIlN5c2NhbGxcIiwgbmFtZSwgcmVxSWQpO1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHNlbGYuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudChcInN5c2NhbGxcIiwge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICBpZDogcmVxSWQsXG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBhcmdzOiBhcmdzLFxuICAgICAgICAgIGNhbGxiYWNrOiByZXNvbHZlLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICApO1xuICB9KTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI0aEJBQUEscUdDQU8sR0FBTSxHQUFnQiw2QkNBdEIsV0FBaUIsS0FBaUIsRUFBa0IsQ0FDekQsR0FBSSxHQUFRLEtBQUssTUFBTSxLQUFLLFNBQVcsS0FFdkMsTUFBTyxJQUFJLFNBQVEsQ0FBQyxFQUFTLElBQVcsQ0FDdEMsS0FBSyxjQUNILEdBQUksYUFBWSxVQUFXLENBQ3pCLE9BQVEsQ0FDTixHQUFJLEVBQ0osS0FBTSxFQUNOLEtBQU0sRUFDTixTQUFVLFFGTnBCLEdBQU0sR0FBZ0IsR0FBSSxRQUFPLEVBQWUsS0FFaEQsaUJBQWlDLENBQUUsT0FBTSxRQUFvQixDQUMzRCxHQUFJLEdBQThDLEdBQ2xELE9BQVMsS0FBUyxHQUFLLFNBQVMsR0FBZ0IsQ0FDOUMsR0FBSSxHQUFTLEVBQU0sR0FDZixFQUFNLEVBQU0sTUFDaEIsRUFBVSxLQUFLLENBQ2IsSUFBSyxNQUFNLEtBQVUsSUFDckIsTUFBTyxJQUdYLFFBQVEsSUFBSSxRQUFTLEVBQVUsT0FBUSxnQkFDdkMsS0FBTSxHQUFRLG1CQUFvQixFQUFNLEdBRzFDLGtCQUFtQyxDQUNqQyxHQUFJLEdBQVcsS0FBTSxHQUFRLHlCQUM3QixRQUFRLElBQUksNEJBQ1osS0FBTSxHQUFRLGtCQUFtQixTQUNqQyxRQUFRLElBQUksNEJBQ1osS0FBTSxHQUFRLG1CQUFvQixFQUFTLE1BQzNDLFFBQVEsSUFBSSx1QkFDWixLQUFNLEdBQVEsd0JBR2hCLGtCQUFtQyxDQUVqQyxHQUFNLEdBQVUsQUFEQyxNQUFNLEdBQVEsMEJBQ04sS0FDekIsUUFBUSxJQUFJLGNBQWUsR0FDM0IsR0FBTSxHQUFVLEtBQU0sR0FDcEIsZ0JBQ0EsVUFBVSxRQUNWLEdBRUYsR0FBSSxDQUFDLEVBQ0gsT0FFRixRQUFRLElBQUksV0FBWSxHQUV4QixHQUFJLEdBQWdCLEtBQU0sR0FBYSxHQUN2QyxRQUFRLElBQUksaUNBQWtDLEdBRTlDLEdBQUksR0FBTyxLQUFNLEdBQVEsa0JBQ3pCLFFBQVEsSUFBSSw2QkFDWixLQUFNLEdBQVEsa0JBQW1CLEVBQVMsR0FDMUMsUUFBUSxJQUFJLDRCQUNaLEtBQU0sR0FBUSxtQkFBb0IsR0FDbEMsUUFBUSxJQUFJLHVCQUNaLEtBQU0sR0FBUSx3QkFDZCxRQUFRLElBQUksMEJBQ1osS0FBTSxHQUFRLGtCQUFtQixHQUVqQyxHQUFJLEdBQWtCLEdBQUksS0FDMUIsT0FBUyxLQUFnQixHQUN2QixFQUFnQixJQUFJLEVBQWEsTUFHbkMsT0FBUyxLQUFnQixHQUFpQixDQUN4QyxRQUFRLElBQUksK0JBQWdDLEdBQzVDLEdBQUksQ0FBRSxRQUFTLEtBQU0sR0FBUSxpQkFBa0IsR0FDL0MsR0FBSSxDQUFDLEVBRUgsU0FFRixHQUFJLEdBQVUsRUFBSyxXQUFXLEtBQUssTUFBYSxLQUFLLE9BQ3JELEFBQUksSUFBUyxHQUNYLFNBQVEsSUFBSSwyQkFDWixLQUFNLEdBQVEsa0JBQW1CLEVBQWMsS0FVckQsaUJBQTRCLEVBQXVDLENBQ2pFLEdBQUksR0FBZSxLQUFNLEdBQ3ZCLDJCQUNBLE1BQU0sTUFFSixFQUE0QixHQUNoQyxPQUFTLENBQUUsTUFBSyxVQUFXLEdBQWMsQ0FDdkMsR0FBSSxHQUFXLEVBQUksTUFBTSxLQUN6QixFQUFjLEtBQUssQ0FDakIsS0FBTSxFQUNOLElBQUssQ0FBQyxFQUFTLEVBQVMsT0FBUyxLQUdyQyxNQUFPLEdBR1Qsa0JBQXNDLENBQ3BDLEdBQU0sR0FBVyxLQUFNLEdBQVEseUJBQzNCLEVBQVksS0FBTSxHQUFhLEVBQVMsTUFFNUMsUUFBUSxJQUFJLFlBQWEsR0FHM0Isa0JBQWdDLENBQzlCLEtBQU0sR0FBUSIsCiAgIm5hbWVzIjogW10KfQo=\n",
      "functionName": "renamePage"
    },
    "reindexPages": {
      "path": "core/page.ts",
      "code": "(()=>{var r=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var k=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var m=a=>r(a,\"__esModule\",{value:!0});var x=(a,e)=>{for(var t in e)r(a,t,{get:e[t],enumerable:!0})},u=(a,e,t,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of k(e))!f.call(a,i)&&(t||i!==\"default\")&&r(a,i,{get:()=>e[i],enumerable:!(o=w(e,i))||o.enumerable});return a};var P=(a=>(e,t)=>a&&a.get(e)||(t=u(m({}),e,1),a&&a.set(e,t),t))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var R={};x(R,{deletePage:()=>h,indexLinks:()=>L,reindex:()=>B,renamePage:()=>v,showBackLinks:()=>b});var p=/\\[\\[([\\w\\s\\/\\:,\\.\\-]+)\\]\\]/;function n(a,...e){let t=Math.floor(Math.random()*1e6);return new Promise((o,i)=>{self.dispatchEvent(new CustomEvent(\"syscall\",{detail:{id:t,name:a,args:e,callback:o}}))})}var y=new RegExp(p,\"g\");async function L({name:a,text:e}){let t=[];for(let o of e.matchAll(y)){let i=o[1],l=o.index;t.push({key:`pl:${i}:${l}`,value:a})}console.log(\"Found\",t.length,\"wiki link(s)\"),await n(\"indexer.batchSet\",a,t)}async function h(){let a=await n(\"editor.getCurrentPage\");console.log(\"Navigating to start page\"),await n(\"editor.navigate\",\"start\"),console.log(\"Deleting page from space\"),await n(\"space.deletePage\",a.name),console.log(\"Reloading page list\"),await n(\"space.reloadPageList\")}async function v(){let e=(await n(\"editor.getCurrentPage\")).name;console.log(\"Old name is\",e);let t=await n(\"editor.prompt\",`Rename ${e} to:`,e);if(!t)return;console.log(\"New name\",t);let o=await d(e);console.log(\"All pages containing backlinks\",o);let i=await n(\"editor.getText\");console.log(\"Writing new page to space\"),await n(\"space.writePage\",t,i),console.log(\"Deleting page from space\"),await n(\"space.deletePage\",e),console.log(\"Reloading page list\"),await n(\"space.reloadPageList\"),console.log(\"Navigating to new page\"),await n(\"editor.navigate\",t);let l=new Set;for(let s of o)l.add(s.page);for(let s of l){console.log(\"Now going to update links in\",s);let{text:g}=await n(\"space.readPage\",s);if(!g)continue;let c=g.replaceAll(`[[${e}]]`,`[[${t}]]`);g!==c&&(console.log(\"Changes made, saving...\"),await n(\"space.writePage\",s,c))}}async function d(a){let e=await n(\"indexer.scanPrefixGlobal\",`pl:${a}:`),t=[];for(let{key:o,value:i}of e){let l=o.split(\":\");t.push({page:i,pos:+l[l.length-1]})}return t}async function b(){let a=await n(\"editor.getCurrentPage\"),e=await d(a.name);console.log(\"Backlinks\",e)}async function B(){await n(\"space.reindex\")}return P(R);})();\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29yZS9wYWdlLnRzIiwgIi4uL3dlYmFwcC9zcmMvY29uc3RhbnQudHMiLCAiY29yZS9saWIvc3lzY2FsbC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgSW5kZXhFdmVudCB9IGZyb20gXCIuLi8uLi93ZWJhcHAvc3JjL2FwcF9ldmVudFwiO1xuaW1wb3J0IHsgcGFnZUxpbmtSZWdleCB9IGZyb20gXCIuLi8uLi93ZWJhcHAvc3JjL2NvbnN0YW50XCI7XG5pbXBvcnQgeyBzeXNjYWxsIH0gZnJvbSBcIi4vbGliL3N5c2NhbGxcIjtcblxuY29uc3Qgd2lraWxpbmtSZWdleCA9IG5ldyBSZWdFeHAocGFnZUxpbmtSZWdleCwgXCJnXCIpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5kZXhMaW5rcyh7IG5hbWUsIHRleHQgfTogSW5kZXhFdmVudCkge1xuICBsZXQgYmFja0xpbmtzOiB7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH1bXSA9IFtdO1xuICBmb3IgKGxldCBtYXRjaCBvZiB0ZXh0Lm1hdGNoQWxsKHdpa2lsaW5rUmVnZXgpKSB7XG4gICAgbGV0IHRvUGFnZSA9IG1hdGNoWzFdO1xuICAgIGxldCBwb3MgPSBtYXRjaC5pbmRleCE7XG4gICAgYmFja0xpbmtzLnB1c2goe1xuICAgICAga2V5OiBgcGw6JHt0b1BhZ2V9OiR7cG9zfWAsXG4gICAgICB2YWx1ZTogbmFtZSxcbiAgICB9KTtcbiAgfVxuICBjb25zb2xlLmxvZyhcIkZvdW5kXCIsIGJhY2tMaW5rcy5sZW5ndGgsIFwid2lraSBsaW5rKHMpXCIpO1xuICBhd2FpdCBzeXNjYWxsKFwiaW5kZXhlci5iYXRjaFNldFwiLCBuYW1lLCBiYWNrTGlua3MpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlUGFnZSgpIHtcbiAgbGV0IHBhZ2VNZXRhID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRDdXJyZW50UGFnZVwiKTtcbiAgY29uc29sZS5sb2coXCJOYXZpZ2F0aW5nIHRvIHN0YXJ0IHBhZ2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IubmF2aWdhdGVcIiwgXCJzdGFydFwiKTtcbiAgY29uc29sZS5sb2coXCJEZWxldGluZyBwYWdlIGZyb20gc3BhY2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5kZWxldGVQYWdlXCIsIHBhZ2VNZXRhLm5hbWUpO1xuICBjb25zb2xlLmxvZyhcIlJlbG9hZGluZyBwYWdlIGxpc3RcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5yZWxvYWRQYWdlTGlzdFwiKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbmFtZVBhZ2UoKSB7XG4gIGNvbnN0IHBhZ2VNZXRhID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRDdXJyZW50UGFnZVwiKTtcbiAgY29uc3Qgb2xkTmFtZSA9IHBhZ2VNZXRhLm5hbWU7XG4gIGNvbnNvbGUubG9nKFwiT2xkIG5hbWUgaXNcIiwgb2xkTmFtZSk7XG4gIGNvbnN0IG5ld05hbWUgPSBhd2FpdCBzeXNjYWxsKFxuICAgIFwiZWRpdG9yLnByb21wdFwiLFxuICAgIGBSZW5hbWUgJHtvbGROYW1lfSB0bzpgLFxuICAgIG9sZE5hbWVcbiAgKTtcbiAgaWYgKCFuZXdOYW1lKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnNvbGUubG9nKFwiTmV3IG5hbWVcIiwgbmV3TmFtZSk7XG5cbiAgbGV0IHBhZ2VzVG9VcGRhdGUgPSBhd2FpdCBnZXRCYWNrTGlua3Mob2xkTmFtZSk7XG4gIGNvbnNvbGUubG9nKFwiQWxsIHBhZ2VzIGNvbnRhaW5pbmcgYmFja2xpbmtzXCIsIHBhZ2VzVG9VcGRhdGUpO1xuXG4gIGxldCB0ZXh0ID0gYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRUZXh0XCIpO1xuICBjb25zb2xlLmxvZyhcIldyaXRpbmcgbmV3IHBhZ2UgdG8gc3BhY2VcIik7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS53cml0ZVBhZ2VcIiwgbmV3TmFtZSwgdGV4dCk7XG4gIGNvbnNvbGUubG9nKFwiRGVsZXRpbmcgcGFnZSBmcm9tIHNwYWNlXCIpO1xuICBhd2FpdCBzeXNjYWxsKFwic3BhY2UuZGVsZXRlUGFnZVwiLCBvbGROYW1lKTtcbiAgY29uc29sZS5sb2coXCJSZWxvYWRpbmcgcGFnZSBsaXN0XCIpO1xuICBhd2FpdCBzeXNjYWxsKFwic3BhY2UucmVsb2FkUGFnZUxpc3RcIik7XG4gIGNvbnNvbGUubG9nKFwiTmF2aWdhdGluZyB0byBuZXcgcGFnZVwiKTtcbiAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5uYXZpZ2F0ZVwiLCBuZXdOYW1lKTtcblxuICBsZXQgcGFnZVRvVXBkYXRlU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGZvciAobGV0IHBhZ2VUb1VwZGF0ZSBvZiBwYWdlc1RvVXBkYXRlKSB7XG4gICAgcGFnZVRvVXBkYXRlU2V0LmFkZChwYWdlVG9VcGRhdGUucGFnZSk7XG4gIH1cblxuICBmb3IgKGxldCBwYWdlVG9VcGRhdGUgb2YgcGFnZVRvVXBkYXRlU2V0KSB7XG4gICAgY29uc29sZS5sb2coXCJOb3cgZ29pbmcgdG8gdXBkYXRlIGxpbmtzIGluXCIsIHBhZ2VUb1VwZGF0ZSk7XG4gICAgbGV0IHsgdGV4dCB9ID0gYXdhaXQgc3lzY2FsbChcInNwYWNlLnJlYWRQYWdlXCIsIHBhZ2VUb1VwZGF0ZSk7XG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICAvLyBQYWdlIGxpa2VseSBkb2VzIG5vdCBleGlzdCwgYnV0IGF0IGxlYXN0IHdlIGNhbiBza2lwIGl0XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgbGV0IG5ld1RleHQgPSB0ZXh0LnJlcGxhY2VBbGwoYFtbJHtvbGROYW1lfV1dYCwgYFtbJHtuZXdOYW1lfV1dYCk7XG4gICAgaWYgKHRleHQgIT09IG5ld1RleHQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ2hhbmdlcyBtYWRlLCBzYXZpbmcuLi5cIik7XG4gICAgICBhd2FpdCBzeXNjYWxsKFwic3BhY2Uud3JpdGVQYWdlXCIsIHBhZ2VUb1VwZGF0ZSwgbmV3VGV4dCk7XG4gICAgfVxuICB9XG59XG5cbnR5cGUgQmFja0xpbmsgPSB7XG4gIHBhZ2U6IHN0cmluZztcbiAgcG9zOiBudW1iZXI7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBnZXRCYWNrTGlua3MocGFnZU5hbWU6IHN0cmluZyk6IFByb21pc2U8QmFja0xpbmtbXT4ge1xuICBsZXQgYWxsQmFja0xpbmtzID0gYXdhaXQgc3lzY2FsbChcbiAgICBcImluZGV4ZXIuc2NhblByZWZpeEdsb2JhbFwiLFxuICAgIGBwbDoke3BhZ2VOYW1lfTpgXG4gICk7XG4gIGxldCBwYWdlc1RvVXBkYXRlOiBCYWNrTGlua1tdID0gW107XG4gIGZvciAobGV0IHsga2V5LCB2YWx1ZSB9IG9mIGFsbEJhY2tMaW5rcykge1xuICAgIGxldCBrZXlQYXJ0cyA9IGtleS5zcGxpdChcIjpcIik7XG4gICAgcGFnZXNUb1VwZGF0ZS5wdXNoKHtcbiAgICAgIHBhZ2U6IHZhbHVlLFxuICAgICAgcG9zOiAra2V5UGFydHNba2V5UGFydHMubGVuZ3RoIC0gMV0sXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHBhZ2VzVG9VcGRhdGU7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzaG93QmFja0xpbmtzKCkge1xuICBjb25zdCBwYWdlTWV0YSA9IGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IuZ2V0Q3VycmVudFBhZ2VcIik7XG4gIGxldCBiYWNrTGlua3MgPSBhd2FpdCBnZXRCYWNrTGlua3MocGFnZU1ldGEubmFtZSk7XG5cbiAgY29uc29sZS5sb2coXCJCYWNrbGlua3NcIiwgYmFja0xpbmtzKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlaW5kZXgoKSB7XG4gIGF3YWl0IHN5c2NhbGwoXCJzcGFjZS5yZWluZGV4XCIpO1xufVxuIiwgImV4cG9ydCBjb25zdCBwYWdlTGlua1JlZ2V4ID0gL1xcW1xcWyhbXFx3XFxzXFwvXFw6LFxcLlxcLV0rKVxcXVxcXS87XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIHN5c2NhbGwobmFtZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IGFueSB7XG4gIGxldCByZXFJZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApO1xuICAvLyBjb25zb2xlLmxvZyhcIlN5c2NhbGxcIiwgbmFtZSwgcmVxSWQpO1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHNlbGYuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudChcInN5c2NhbGxcIiwge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICBpZDogcmVxSWQsXG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBhcmdzOiBhcmdzLFxuICAgICAgICAgIGNhbGxiYWNrOiByZXNvbHZlLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICApO1xuICB9KTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI0aEJBQUEscUdDQU8sR0FBTSxHQUFnQiw2QkNBdEIsV0FBaUIsS0FBaUIsRUFBa0IsQ0FDekQsR0FBSSxHQUFRLEtBQUssTUFBTSxLQUFLLFNBQVcsS0FFdkMsTUFBTyxJQUFJLFNBQVEsQ0FBQyxFQUFTLElBQVcsQ0FDdEMsS0FBSyxjQUNILEdBQUksYUFBWSxVQUFXLENBQ3pCLE9BQVEsQ0FDTixHQUFJLEVBQ0osS0FBTSxFQUNOLEtBQU0sRUFDTixTQUFVLFFGTnBCLEdBQU0sR0FBZ0IsR0FBSSxRQUFPLEVBQWUsS0FFaEQsaUJBQWlDLENBQUUsT0FBTSxRQUFvQixDQUMzRCxHQUFJLEdBQThDLEdBQ2xELE9BQVMsS0FBUyxHQUFLLFNBQVMsR0FBZ0IsQ0FDOUMsR0FBSSxHQUFTLEVBQU0sR0FDZixFQUFNLEVBQU0sTUFDaEIsRUFBVSxLQUFLLENBQ2IsSUFBSyxNQUFNLEtBQVUsSUFDckIsTUFBTyxJQUdYLFFBQVEsSUFBSSxRQUFTLEVBQVUsT0FBUSxnQkFDdkMsS0FBTSxHQUFRLG1CQUFvQixFQUFNLEdBRzFDLGtCQUFtQyxDQUNqQyxHQUFJLEdBQVcsS0FBTSxHQUFRLHlCQUM3QixRQUFRLElBQUksNEJBQ1osS0FBTSxHQUFRLGtCQUFtQixTQUNqQyxRQUFRLElBQUksNEJBQ1osS0FBTSxHQUFRLG1CQUFvQixFQUFTLE1BQzNDLFFBQVEsSUFBSSx1QkFDWixLQUFNLEdBQVEsd0JBR2hCLGtCQUFtQyxDQUVqQyxHQUFNLEdBQVUsQUFEQyxNQUFNLEdBQVEsMEJBQ04sS0FDekIsUUFBUSxJQUFJLGNBQWUsR0FDM0IsR0FBTSxHQUFVLEtBQU0sR0FDcEIsZ0JBQ0EsVUFBVSxRQUNWLEdBRUYsR0FBSSxDQUFDLEVBQ0gsT0FFRixRQUFRLElBQUksV0FBWSxHQUV4QixHQUFJLEdBQWdCLEtBQU0sR0FBYSxHQUN2QyxRQUFRLElBQUksaUNBQWtDLEdBRTlDLEdBQUksR0FBTyxLQUFNLEdBQVEsa0JBQ3pCLFFBQVEsSUFBSSw2QkFDWixLQUFNLEdBQVEsa0JBQW1CLEVBQVMsR0FDMUMsUUFBUSxJQUFJLDRCQUNaLEtBQU0sR0FBUSxtQkFBb0IsR0FDbEMsUUFBUSxJQUFJLHVCQUNaLEtBQU0sR0FBUSx3QkFDZCxRQUFRLElBQUksMEJBQ1osS0FBTSxHQUFRLGtCQUFtQixHQUVqQyxHQUFJLEdBQWtCLEdBQUksS0FDMUIsT0FBUyxLQUFnQixHQUN2QixFQUFnQixJQUFJLEVBQWEsTUFHbkMsT0FBUyxLQUFnQixHQUFpQixDQUN4QyxRQUFRLElBQUksK0JBQWdDLEdBQzVDLEdBQUksQ0FBRSxRQUFTLEtBQU0sR0FBUSxpQkFBa0IsR0FDL0MsR0FBSSxDQUFDLEVBRUgsU0FFRixHQUFJLEdBQVUsRUFBSyxXQUFXLEtBQUssTUFBYSxLQUFLLE9BQ3JELEFBQUksSUFBUyxHQUNYLFNBQVEsSUFBSSwyQkFDWixLQUFNLEdBQVEsa0JBQW1CLEVBQWMsS0FVckQsaUJBQTRCLEVBQXVDLENBQ2pFLEdBQUksR0FBZSxLQUFNLEdBQ3ZCLDJCQUNBLE1BQU0sTUFFSixFQUE0QixHQUNoQyxPQUFTLENBQUUsTUFBSyxVQUFXLEdBQWMsQ0FDdkMsR0FBSSxHQUFXLEVBQUksTUFBTSxLQUN6QixFQUFjLEtBQUssQ0FDakIsS0FBTSxFQUNOLElBQUssQ0FBQyxFQUFTLEVBQVMsT0FBUyxLQUdyQyxNQUFPLEdBR1Qsa0JBQXNDLENBQ3BDLEdBQU0sR0FBVyxLQUFNLEdBQVEseUJBQzNCLEVBQVksS0FBTSxHQUFhLEVBQVMsTUFFNUMsUUFBUSxJQUFJLFlBQWEsR0FHM0Isa0JBQWdDLENBQzlCLEtBQU0sR0FBUSIsCiAgIm5hbWVzIjogW10KfQo=\n",
      "functionName": "reindex"
    },
    "pageComplete": {
      "path": "core/navigate.ts",
      "code": "(()=>{var o=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var s=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var m=e=>o(e,\"__esModule\",{value:!0});var f=(e,t)=>{for(var a in t)o(e,a,{get:t[a],enumerable:!0})},g=(e,t,a,r)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let n of s(t))!p.call(e,n)&&(a||n!==\"default\")&&o(e,n,{get:()=>t[n],enumerable:!(r=c(t,n))||r.enumerable});return e};var y=(e=>(t,a)=>e&&e.get(t)||(a=g(m({}),t,1),e&&e.set(t,a),a))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var k={};f(k,{clickNavigate:()=>u,linkNavigate:()=>d,pageComplete:()=>w});function i(e,...t){let a=Math.floor(Math.random()*1e6);return new Promise((r,n)=>{self.dispatchEvent(new CustomEvent(\"syscall\",{detail:{id:a,name:e,args:t,callback:r}}))})}async function l(e){if(!!e)switch(console.log(\"Attempting to navigate based on syntax node\",e),e.name){case\"WikiLinkPage\":await i(\"editor.navigate\",e.text);break;case\"URL\":await i(\"editor.openUrl\",e.text);break;case\"Link\":let t=/\\[[^\\\\]+\\]\\(([^\\)]+)\\)/.exec(e.text);t&&await i(\"editor.openUrl\",t[1])}}async function d(){l(await i(\"editor.getSyntaxNodeUnderCursor\"))}async function u(e){if(e.ctrlKey||e.metaKey){let t=await i(\"editor.getSyntaxNodeAtPos\",e.pos);l(t)}}async function w(){let e=await i(\"editor.matchBefore\",\"\\\\[\\\\[[\\\\w\\\\s]*\");if(!e)return null;let t=await i(\"space.listPages\");return{from:e.from+2,options:t.map(a=>({label:a.name,type:\"page\"}))}}return y(k);})();\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29yZS9uYXZpZ2F0ZS50cyIsICJjb3JlL2xpYi9zeXNjYWxsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBDbGlja0V2ZW50IH0gZnJvbSBcIi4uLy4uL3dlYmFwcC9zcmMvYXBwX2V2ZW50LnRzXCI7XG5pbXBvcnQgeyBzeXNjYWxsIH0gZnJvbSBcIi4vbGliL3N5c2NhbGwudHNcIjtcblxuYXN5bmMgZnVuY3Rpb24gbmF2aWdhdGUoc3ludGF4Tm9kZTogYW55KSB7XG4gIGlmICghc3ludGF4Tm9kZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zb2xlLmxvZyhcIkF0dGVtcHRpbmcgdG8gbmF2aWdhdGUgYmFzZWQgb24gc3ludGF4IG5vZGVcIiwgc3ludGF4Tm9kZSk7XG4gIHN3aXRjaCAoc3ludGF4Tm9kZS5uYW1lKSB7XG4gICAgY2FzZSBcIldpa2lMaW5rUGFnZVwiOlxuICAgICAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5uYXZpZ2F0ZVwiLCBzeW50YXhOb2RlLnRleHQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlVSTFwiOlxuICAgICAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5vcGVuVXJsXCIsIHN5bnRheE5vZGUudGV4dCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiTGlua1wiOlxuICAgICAgLy8gTWFya2Rvd24gbGluazogW2JsYV0oVVJMSEVSRSkgbmVlZHMgZXh0cmFjdGlvblxuICAgICAgbGV0IG1hdGNoID0gL1xcW1teXFxcXF0rXFxdXFwoKFteXFwpXSspXFwpLy5leGVjKHN5bnRheE5vZGUudGV4dCk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5vcGVuVXJsXCIsIG1hdGNoWzFdKTtcbiAgICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlua05hdmlnYXRlKCkge1xuICBuYXZpZ2F0ZShhd2FpdCBzeXNjYWxsKFwiZWRpdG9yLmdldFN5bnRheE5vZGVVbmRlckN1cnNvclwiKSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGlja05hdmlnYXRlKGV2ZW50OiBDbGlja0V2ZW50KSB7XG4gIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcbiAgICBsZXQgc3ludGF4Tm9kZSA9IGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IuZ2V0U3ludGF4Tm9kZUF0UG9zXCIsIGV2ZW50LnBvcyk7XG4gICAgbmF2aWdhdGUoc3ludGF4Tm9kZSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBhZ2VDb21wbGV0ZSgpIHtcbiAgbGV0IHByZWZpeCA9IGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IubWF0Y2hCZWZvcmVcIiwgXCJcXFxcW1xcXFxbW1xcXFx3XFxcXHNdKlwiKTtcbiAgaWYgKCFwcmVmaXgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBsZXQgYWxsUGFnZXMgPSBhd2FpdCBzeXNjYWxsKFwic3BhY2UubGlzdFBhZ2VzXCIpO1xuICByZXR1cm4ge1xuICAgIGZyb206IHByZWZpeC5mcm9tICsgMixcbiAgICBvcHRpb25zOiBhbGxQYWdlcy5tYXAoKHBhZ2VNZXRhOiBhbnkpID0+ICh7XG4gICAgICBsYWJlbDogcGFnZU1ldGEubmFtZSxcbiAgICAgIHR5cGU6IFwicGFnZVwiLFxuICAgIH0pKSxcbiAgfTtcbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gc3lzY2FsbChuYW1lOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogYW55IHtcbiAgbGV0IHJlcUlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiU3lzY2FsbFwiLCBuYW1lLCByZXFJZCk7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgc2VsZi5kaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IEN1c3RvbUV2ZW50KFwic3lzY2FsbFwiLCB7XG4gICAgICAgIGRldGFpbDoge1xuICAgICAgICAgIGlkOiByZXFJZCxcbiAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgIGFyZ3M6IGFyZ3MsXG4gICAgICAgICAgY2FsbGJhY2s6IHJlc29sdmUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICk7XG4gIH0pO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjRoQkFBQSwwRUNBTyxXQUFpQixLQUFpQixFQUFrQixDQUN6RCxHQUFJLEdBQVEsS0FBSyxNQUFNLEtBQUssU0FBVyxLQUV2QyxNQUFPLElBQUksU0FBUSxDQUFDLEVBQVMsSUFBVyxDQUN0QyxLQUFLLGNBQ0gsR0FBSSxhQUFZLFVBQVcsQ0FDekIsT0FBUSxDQUNOLEdBQUksRUFDSixLQUFNLEVBQ04sS0FBTSxFQUNOLFNBQVUsUURQcEIsaUJBQXdCLEVBQWlCLENBQ3ZDLEdBQUksRUFBQyxFQUlMLE9BREEsUUFBUSxJQUFJLDhDQUErQyxHQUNuRCxFQUFXLFVBQ1osZUFDSCxLQUFNLEdBQVEsa0JBQW1CLEVBQVcsTUFDNUMsVUFDRyxNQUNILEtBQU0sR0FBUSxpQkFBa0IsRUFBVyxNQUMzQyxVQUNHLE9BRUgsR0FBSSxHQUFRLHlCQUF5QixLQUFLLEVBQVcsTUFDckQsQUFBSSxHQUNGLEtBQU0sR0FBUSxpQkFBa0IsRUFBTSxLQUs5QyxrQkFBcUMsQ0FDbkMsRUFBUyxLQUFNLEdBQVEsb0NBR3pCLGlCQUFvQyxFQUFtQixDQUNyRCxHQUFJLEVBQU0sU0FBVyxFQUFNLFFBQVMsQ0FDbEMsR0FBSSxHQUFhLEtBQU0sR0FBUSw0QkFBNkIsRUFBTSxLQUNsRSxFQUFTLElBSWIsa0JBQXFDLENBQ25DLEdBQUksR0FBUyxLQUFNLEdBQVEscUJBQXNCLG1CQUNqRCxHQUFJLENBQUMsRUFDSCxNQUFPLE1BRVQsR0FBSSxHQUFXLEtBQU0sR0FBUSxtQkFDN0IsTUFBTyxDQUNMLEtBQU0sRUFBTyxLQUFPLEVBQ3BCLFFBQVMsRUFBUyxJQUFJLEFBQUMsR0FBbUIsRUFDeEMsTUFBTyxFQUFTLEtBQ2hCLEtBQU0iLAogICJuYW1lcyI6IFtdCn0K\n",
      "functionName": "pageComplete"
    },
    "linkNavigate": {
      "path": "core/navigate.ts",
      "code": "(()=>{var o=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var s=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var m=e=>o(e,\"__esModule\",{value:!0});var f=(e,t)=>{for(var a in t)o(e,a,{get:t[a],enumerable:!0})},g=(e,t,a,r)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let n of s(t))!p.call(e,n)&&(a||n!==\"default\")&&o(e,n,{get:()=>t[n],enumerable:!(r=c(t,n))||r.enumerable});return e};var y=(e=>(t,a)=>e&&e.get(t)||(a=g(m({}),t,1),e&&e.set(t,a),a))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var k={};f(k,{clickNavigate:()=>u,linkNavigate:()=>d,pageComplete:()=>w});function i(e,...t){let a=Math.floor(Math.random()*1e6);return new Promise((r,n)=>{self.dispatchEvent(new CustomEvent(\"syscall\",{detail:{id:a,name:e,args:t,callback:r}}))})}async function l(e){if(!!e)switch(console.log(\"Attempting to navigate based on syntax node\",e),e.name){case\"WikiLinkPage\":await i(\"editor.navigate\",e.text);break;case\"URL\":await i(\"editor.openUrl\",e.text);break;case\"Link\":let t=/\\[[^\\\\]+\\]\\(([^\\)]+)\\)/.exec(e.text);t&&await i(\"editor.openUrl\",t[1])}}async function d(){l(await i(\"editor.getSyntaxNodeUnderCursor\"))}async function u(e){if(e.ctrlKey||e.metaKey){let t=await i(\"editor.getSyntaxNodeAtPos\",e.pos);l(t)}}async function w(){let e=await i(\"editor.matchBefore\",\"\\\\[\\\\[[\\\\w\\\\s]*\");if(!e)return null;let t=await i(\"space.listPages\");return{from:e.from+2,options:t.map(a=>({label:a.name,type:\"page\"}))}}return y(k);})();\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29yZS9uYXZpZ2F0ZS50cyIsICJjb3JlL2xpYi9zeXNjYWxsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBDbGlja0V2ZW50IH0gZnJvbSBcIi4uLy4uL3dlYmFwcC9zcmMvYXBwX2V2ZW50LnRzXCI7XG5pbXBvcnQgeyBzeXNjYWxsIH0gZnJvbSBcIi4vbGliL3N5c2NhbGwudHNcIjtcblxuYXN5bmMgZnVuY3Rpb24gbmF2aWdhdGUoc3ludGF4Tm9kZTogYW55KSB7XG4gIGlmICghc3ludGF4Tm9kZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zb2xlLmxvZyhcIkF0dGVtcHRpbmcgdG8gbmF2aWdhdGUgYmFzZWQgb24gc3ludGF4IG5vZGVcIiwgc3ludGF4Tm9kZSk7XG4gIHN3aXRjaCAoc3ludGF4Tm9kZS5uYW1lKSB7XG4gICAgY2FzZSBcIldpa2lMaW5rUGFnZVwiOlxuICAgICAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5uYXZpZ2F0ZVwiLCBzeW50YXhOb2RlLnRleHQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlVSTFwiOlxuICAgICAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5vcGVuVXJsXCIsIHN5bnRheE5vZGUudGV4dCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiTGlua1wiOlxuICAgICAgLy8gTWFya2Rvd24gbGluazogW2JsYV0oVVJMSEVSRSkgbmVlZHMgZXh0cmFjdGlvblxuICAgICAgbGV0IG1hdGNoID0gL1xcW1teXFxcXF0rXFxdXFwoKFteXFwpXSspXFwpLy5leGVjKHN5bnRheE5vZGUudGV4dCk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5vcGVuVXJsXCIsIG1hdGNoWzFdKTtcbiAgICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlua05hdmlnYXRlKCkge1xuICBuYXZpZ2F0ZShhd2FpdCBzeXNjYWxsKFwiZWRpdG9yLmdldFN5bnRheE5vZGVVbmRlckN1cnNvclwiKSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGlja05hdmlnYXRlKGV2ZW50OiBDbGlja0V2ZW50KSB7XG4gIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcbiAgICBsZXQgc3ludGF4Tm9kZSA9IGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IuZ2V0U3ludGF4Tm9kZUF0UG9zXCIsIGV2ZW50LnBvcyk7XG4gICAgbmF2aWdhdGUoc3ludGF4Tm9kZSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBhZ2VDb21wbGV0ZSgpIHtcbiAgbGV0IHByZWZpeCA9IGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IubWF0Y2hCZWZvcmVcIiwgXCJcXFxcW1xcXFxbW1xcXFx3XFxcXHNdKlwiKTtcbiAgaWYgKCFwcmVmaXgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBsZXQgYWxsUGFnZXMgPSBhd2FpdCBzeXNjYWxsKFwic3BhY2UubGlzdFBhZ2VzXCIpO1xuICByZXR1cm4ge1xuICAgIGZyb206IHByZWZpeC5mcm9tICsgMixcbiAgICBvcHRpb25zOiBhbGxQYWdlcy5tYXAoKHBhZ2VNZXRhOiBhbnkpID0+ICh7XG4gICAgICBsYWJlbDogcGFnZU1ldGEubmFtZSxcbiAgICAgIHR5cGU6IFwicGFnZVwiLFxuICAgIH0pKSxcbiAgfTtcbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gc3lzY2FsbChuYW1lOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogYW55IHtcbiAgbGV0IHJlcUlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiU3lzY2FsbFwiLCBuYW1lLCByZXFJZCk7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgc2VsZi5kaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IEN1c3RvbUV2ZW50KFwic3lzY2FsbFwiLCB7XG4gICAgICAgIGRldGFpbDoge1xuICAgICAgICAgIGlkOiByZXFJZCxcbiAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgIGFyZ3M6IGFyZ3MsXG4gICAgICAgICAgY2FsbGJhY2s6IHJlc29sdmUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICk7XG4gIH0pO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjRoQkFBQSwwRUNBTyxXQUFpQixLQUFpQixFQUFrQixDQUN6RCxHQUFJLEdBQVEsS0FBSyxNQUFNLEtBQUssU0FBVyxLQUV2QyxNQUFPLElBQUksU0FBUSxDQUFDLEVBQVMsSUFBVyxDQUN0QyxLQUFLLGNBQ0gsR0FBSSxhQUFZLFVBQVcsQ0FDekIsT0FBUSxDQUNOLEdBQUksRUFDSixLQUFNLEVBQ04sS0FBTSxFQUNOLFNBQVUsUURQcEIsaUJBQXdCLEVBQWlCLENBQ3ZDLEdBQUksRUFBQyxFQUlMLE9BREEsUUFBUSxJQUFJLDhDQUErQyxHQUNuRCxFQUFXLFVBQ1osZUFDSCxLQUFNLEdBQVEsa0JBQW1CLEVBQVcsTUFDNUMsVUFDRyxNQUNILEtBQU0sR0FBUSxpQkFBa0IsRUFBVyxNQUMzQyxVQUNHLE9BRUgsR0FBSSxHQUFRLHlCQUF5QixLQUFLLEVBQVcsTUFDckQsQUFBSSxHQUNGLEtBQU0sR0FBUSxpQkFBa0IsRUFBTSxLQUs5QyxrQkFBcUMsQ0FDbkMsRUFBUyxLQUFNLEdBQVEsb0NBR3pCLGlCQUFvQyxFQUFtQixDQUNyRCxHQUFJLEVBQU0sU0FBVyxFQUFNLFFBQVMsQ0FDbEMsR0FBSSxHQUFhLEtBQU0sR0FBUSw0QkFBNkIsRUFBTSxLQUNsRSxFQUFTLElBSWIsa0JBQXFDLENBQ25DLEdBQUksR0FBUyxLQUFNLEdBQVEscUJBQXNCLG1CQUNqRCxHQUFJLENBQUMsRUFDSCxNQUFPLE1BRVQsR0FBSSxHQUFXLEtBQU0sR0FBUSxtQkFDN0IsTUFBTyxDQUNMLEtBQU0sRUFBTyxLQUFPLEVBQ3BCLFFBQVMsRUFBUyxJQUFJLEFBQUMsR0FBbUIsRUFDeEMsTUFBTyxFQUFTLEtBQ2hCLEtBQU0iLAogICJuYW1lcyI6IFtdCn0K\n",
      "functionName": "linkNavigate"
    },
    "clickNavigate": {
      "path": "core/navigate.ts",
      "code": "(()=>{var o=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var s=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var m=e=>o(e,\"__esModule\",{value:!0});var f=(e,t)=>{for(var a in t)o(e,a,{get:t[a],enumerable:!0})},g=(e,t,a,r)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let n of s(t))!p.call(e,n)&&(a||n!==\"default\")&&o(e,n,{get:()=>t[n],enumerable:!(r=c(t,n))||r.enumerable});return e};var y=(e=>(t,a)=>e&&e.get(t)||(a=g(m({}),t,1),e&&e.set(t,a),a))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var k={};f(k,{clickNavigate:()=>u,linkNavigate:()=>d,pageComplete:()=>w});function i(e,...t){let a=Math.floor(Math.random()*1e6);return new Promise((r,n)=>{self.dispatchEvent(new CustomEvent(\"syscall\",{detail:{id:a,name:e,args:t,callback:r}}))})}async function l(e){if(!!e)switch(console.log(\"Attempting to navigate based on syntax node\",e),e.name){case\"WikiLinkPage\":await i(\"editor.navigate\",e.text);break;case\"URL\":await i(\"editor.openUrl\",e.text);break;case\"Link\":let t=/\\[[^\\\\]+\\]\\(([^\\)]+)\\)/.exec(e.text);t&&await i(\"editor.openUrl\",t[1])}}async function d(){l(await i(\"editor.getSyntaxNodeUnderCursor\"))}async function u(e){if(e.ctrlKey||e.metaKey){let t=await i(\"editor.getSyntaxNodeAtPos\",e.pos);l(t)}}async function w(){let e=await i(\"editor.matchBefore\",\"\\\\[\\\\[[\\\\w\\\\s]*\");if(!e)return null;let t=await i(\"space.listPages\");return{from:e.from+2,options:t.map(a=>({label:a.name,type:\"page\"}))}}return y(k);})();\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29yZS9uYXZpZ2F0ZS50cyIsICJjb3JlL2xpYi9zeXNjYWxsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBDbGlja0V2ZW50IH0gZnJvbSBcIi4uLy4uL3dlYmFwcC9zcmMvYXBwX2V2ZW50LnRzXCI7XG5pbXBvcnQgeyBzeXNjYWxsIH0gZnJvbSBcIi4vbGliL3N5c2NhbGwudHNcIjtcblxuYXN5bmMgZnVuY3Rpb24gbmF2aWdhdGUoc3ludGF4Tm9kZTogYW55KSB7XG4gIGlmICghc3ludGF4Tm9kZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zb2xlLmxvZyhcIkF0dGVtcHRpbmcgdG8gbmF2aWdhdGUgYmFzZWQgb24gc3ludGF4IG5vZGVcIiwgc3ludGF4Tm9kZSk7XG4gIHN3aXRjaCAoc3ludGF4Tm9kZS5uYW1lKSB7XG4gICAgY2FzZSBcIldpa2lMaW5rUGFnZVwiOlxuICAgICAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5uYXZpZ2F0ZVwiLCBzeW50YXhOb2RlLnRleHQpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIlVSTFwiOlxuICAgICAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5vcGVuVXJsXCIsIHN5bnRheE5vZGUudGV4dCk7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFwiTGlua1wiOlxuICAgICAgLy8gTWFya2Rvd24gbGluazogW2JsYV0oVVJMSEVSRSkgbmVlZHMgZXh0cmFjdGlvblxuICAgICAgbGV0IG1hdGNoID0gL1xcW1teXFxcXF0rXFxdXFwoKFteXFwpXSspXFwpLy5leGVjKHN5bnRheE5vZGUudGV4dCk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5vcGVuVXJsXCIsIG1hdGNoWzFdKTtcbiAgICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlua05hdmlnYXRlKCkge1xuICBuYXZpZ2F0ZShhd2FpdCBzeXNjYWxsKFwiZWRpdG9yLmdldFN5bnRheE5vZGVVbmRlckN1cnNvclwiKSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGlja05hdmlnYXRlKGV2ZW50OiBDbGlja0V2ZW50KSB7XG4gIGlmIChldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcbiAgICBsZXQgc3ludGF4Tm9kZSA9IGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IuZ2V0U3ludGF4Tm9kZUF0UG9zXCIsIGV2ZW50LnBvcyk7XG4gICAgbmF2aWdhdGUoc3ludGF4Tm9kZSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBhZ2VDb21wbGV0ZSgpIHtcbiAgbGV0IHByZWZpeCA9IGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IubWF0Y2hCZWZvcmVcIiwgXCJcXFxcW1xcXFxbW1xcXFx3XFxcXHNdKlwiKTtcbiAgaWYgKCFwcmVmaXgpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBsZXQgYWxsUGFnZXMgPSBhd2FpdCBzeXNjYWxsKFwic3BhY2UubGlzdFBhZ2VzXCIpO1xuICByZXR1cm4ge1xuICAgIGZyb206IHByZWZpeC5mcm9tICsgMixcbiAgICBvcHRpb25zOiBhbGxQYWdlcy5tYXAoKHBhZ2VNZXRhOiBhbnkpID0+ICh7XG4gICAgICBsYWJlbDogcGFnZU1ldGEubmFtZSxcbiAgICAgIHR5cGU6IFwicGFnZVwiLFxuICAgIH0pKSxcbiAgfTtcbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gc3lzY2FsbChuYW1lOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogYW55IHtcbiAgbGV0IHJlcUlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiU3lzY2FsbFwiLCBuYW1lLCByZXFJZCk7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgc2VsZi5kaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IEN1c3RvbUV2ZW50KFwic3lzY2FsbFwiLCB7XG4gICAgICAgIGRldGFpbDoge1xuICAgICAgICAgIGlkOiByZXFJZCxcbiAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgIGFyZ3M6IGFyZ3MsXG4gICAgICAgICAgY2FsbGJhY2s6IHJlc29sdmUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICk7XG4gIH0pO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjRoQkFBQSwwRUNBTyxXQUFpQixLQUFpQixFQUFrQixDQUN6RCxHQUFJLEdBQVEsS0FBSyxNQUFNLEtBQUssU0FBVyxLQUV2QyxNQUFPLElBQUksU0FBUSxDQUFDLEVBQVMsSUFBVyxDQUN0QyxLQUFLLGNBQ0gsR0FBSSxhQUFZLFVBQVcsQ0FDekIsT0FBUSxDQUNOLEdBQUksRUFDSixLQUFNLEVBQ04sS0FBTSxFQUNOLFNBQVUsUURQcEIsaUJBQXdCLEVBQWlCLENBQ3ZDLEdBQUksRUFBQyxFQUlMLE9BREEsUUFBUSxJQUFJLDhDQUErQyxHQUNuRCxFQUFXLFVBQ1osZUFDSCxLQUFNLEdBQVEsa0JBQW1CLEVBQVcsTUFDNUMsVUFDRyxNQUNILEtBQU0sR0FBUSxpQkFBa0IsRUFBVyxNQUMzQyxVQUNHLE9BRUgsR0FBSSxHQUFRLHlCQUF5QixLQUFLLEVBQVcsTUFDckQsQUFBSSxHQUNGLEtBQU0sR0FBUSxpQkFBa0IsRUFBTSxLQUs5QyxrQkFBcUMsQ0FDbkMsRUFBUyxLQUFNLEdBQVEsb0NBR3pCLGlCQUFvQyxFQUFtQixDQUNyRCxHQUFJLEVBQU0sU0FBVyxFQUFNLFFBQVMsQ0FDbEMsR0FBSSxHQUFhLEtBQU0sR0FBUSw0QkFBNkIsRUFBTSxLQUNsRSxFQUFTLElBSWIsa0JBQXFDLENBQ25DLEdBQUksR0FBUyxLQUFNLEdBQVEscUJBQXNCLG1CQUNqRCxHQUFJLENBQUMsRUFDSCxNQUFPLE1BRVQsR0FBSSxHQUFXLEtBQU0sR0FBUSxtQkFDN0IsTUFBTyxDQUNMLEtBQU0sRUFBTyxLQUFPLEVBQ3BCLFFBQVMsRUFBUyxJQUFJLEFBQUMsR0FBbUIsRUFDeEMsTUFBTyxFQUFTLEtBQ2hCLEtBQU0iLAogICJuYW1lcyI6IFtdCn0K\n",
      "functionName": "clickNavigate"
    },
    "taskToggle": {
      "path": "core/task.ts",
      "code": "(()=>{var n=Object.defineProperty;var i=Object.getOwnPropertyDescriptor;var c=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var m=e=>n(e,\"__esModule\",{value:!0});var d=(e,t)=>{for(var o in t)n(e,o,{get:t[o],enumerable:!0})},f=(e,t,o,s)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let a of c(t))!l.call(e,a)&&(o||a!==\"default\")&&n(e,a,{get:()=>t[a],enumerable:!(s=i(t,a))||s.enumerable});return e};var p=(e=>(t,o)=>e&&e.get(t)||(o=f(m({}),t,1),e&&e.set(t,o),o))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var x={};d(x,{taskToggle:()=>h});function r(e,...t){let o=Math.floor(Math.random()*1e6);return new Promise((s,a)=>{self.dispatchEvent(new CustomEvent(\"syscall\",{detail:{id:o,name:e,args:t,callback:s}}))})}async function h(e){let t=await r(\"editor.getSyntaxNodeAtPos\",e.pos);t&&t.name===\"TaskMarker\"&&(t.text===\"[x]\"||t.text===\"[X]\"?await r(\"editor.dispatch\",{changes:{from:t.from,to:t.to,insert:\"[ ]\"},selection:{anchor:e.pos}}):await r(\"editor.dispatch\",{changes:{from:t.from,to:t.to,insert:\"[x]\"},selection:{anchor:e.pos}}))}return p(x);})();\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29yZS90YXNrLnRzIiwgImNvcmUvbGliL3N5c2NhbGwudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IENsaWNrRXZlbnQgfSBmcm9tIFwiLi4vLi4vd2ViYXBwL3NyYy9hcHBfZXZlbnQudHNcIjtcbmltcG9ydCB7IHN5c2NhbGwgfSBmcm9tIFwiLi9saWIvc3lzY2FsbC50c1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGFza1RvZ2dsZShldmVudDogQ2xpY2tFdmVudCkge1xuICBsZXQgc3ludGF4Tm9kZSA9IGF3YWl0IHN5c2NhbGwoXCJlZGl0b3IuZ2V0U3ludGF4Tm9kZUF0UG9zXCIsIGV2ZW50LnBvcyk7XG4gIGlmIChzeW50YXhOb2RlICYmIHN5bnRheE5vZGUubmFtZSA9PT0gXCJUYXNrTWFya2VyXCIpIHtcbiAgICBpZiAoc3ludGF4Tm9kZS50ZXh0ID09PSBcIlt4XVwiIHx8IHN5bnRheE5vZGUudGV4dCA9PT0gXCJbWF1cIikge1xuICAgICAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5kaXNwYXRjaFwiLCB7XG4gICAgICAgIGNoYW5nZXM6IHtcbiAgICAgICAgICBmcm9tOiBzeW50YXhOb2RlLmZyb20sXG4gICAgICAgICAgdG86IHN5bnRheE5vZGUudG8sXG4gICAgICAgICAgaW5zZXJ0OiBcIlsgXVwiLFxuICAgICAgICB9LFxuICAgICAgICBzZWxlY3Rpb246IHtcbiAgICAgICAgICBhbmNob3I6IGV2ZW50LnBvcyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBzeXNjYWxsKFwiZWRpdG9yLmRpc3BhdGNoXCIsIHtcbiAgICAgICAgY2hhbmdlczoge1xuICAgICAgICAgIGZyb206IHN5bnRheE5vZGUuZnJvbSxcbiAgICAgICAgICB0bzogc3ludGF4Tm9kZS50byxcbiAgICAgICAgICBpbnNlcnQ6IFwiW3hdXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdGlvbjoge1xuICAgICAgICAgIGFuY2hvcjogZXZlbnQucG9zLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIHN5c2NhbGwobmFtZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IGFueSB7XG4gIGxldCByZXFJZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApO1xuICAvLyBjb25zb2xlLmxvZyhcIlN5c2NhbGxcIiwgbmFtZSwgcmVxSWQpO1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHNlbGYuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudChcInN5c2NhbGxcIiwge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICBpZDogcmVxSWQsXG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBhcmdzOiBhcmdzLFxuICAgICAgICAgIGNhbGxiYWNrOiByZXNvbHZlLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICApO1xuICB9KTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI0aEJBQUEsaUNDQU8sV0FBaUIsS0FBaUIsRUFBa0IsQ0FDekQsR0FBSSxHQUFRLEtBQUssTUFBTSxLQUFLLFNBQVcsS0FFdkMsTUFBTyxJQUFJLFNBQVEsQ0FBQyxFQUFTLElBQVcsQ0FDdEMsS0FBSyxjQUNILEdBQUksYUFBWSxVQUFXLENBQ3pCLE9BQVEsQ0FDTixHQUFJLEVBQ0osS0FBTSxFQUNOLEtBQU0sRUFDTixTQUFVLFFEUHBCLGlCQUFpQyxFQUFtQixDQUNsRCxHQUFJLEdBQWEsS0FBTSxHQUFRLDRCQUE2QixFQUFNLEtBQ2xFLEFBQUksR0FBYyxFQUFXLE9BQVMsY0FDcEMsQ0FBSSxFQUFXLE9BQVMsT0FBUyxFQUFXLE9BQVMsTUFDbkQsS0FBTSxHQUFRLGtCQUFtQixDQUMvQixRQUFTLENBQ1AsS0FBTSxFQUFXLEtBQ2pCLEdBQUksRUFBVyxHQUNmLE9BQVEsT0FFVixVQUFXLENBQ1QsT0FBUSxFQUFNLE9BSWxCLEtBQU0sR0FBUSxrQkFBbUIsQ0FDL0IsUUFBUyxDQUNQLEtBQU0sRUFBVyxLQUNqQixHQUFJLEVBQVcsR0FDZixPQUFRLE9BRVYsVUFBVyxDQUNULE9BQVEsRUFBTSIsCiAgIm5hbWVzIjogW10KfQo=\n",
      "functionName": "taskToggle"
    },
    "insertToday": {
      "path": "core/dates.ts",
      "code": "(()=>{var s=Object.defineProperty;var o=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var c=Object.prototype.hasOwnProperty;var d=t=>s(t,\"__esModule\",{value:!0});var y=(t,e)=>{for(var a in e)s(t,a,{get:e[a],enumerable:!0})},m=(t,e,a,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let n of l(e))!c.call(t,n)&&(a||n!==\"default\")&&s(t,n,{get:()=>e[n],enumerable:!(r=o(e,n))||r.enumerable});return t};var f=(t=>(e,a)=>t&&t.get(e)||(a=m(d({}),e,1),t&&t.set(e,a),a))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var u={};y(u,{insertToday:()=>p});function i(t,...e){let a=Math.floor(Math.random()*1e6);return new Promise((r,n)=>{self.dispatchEvent(new CustomEvent(\"syscall\",{detail:{id:a,name:t,args:e,callback:r}}))})}async function p(){let t=new Date().toISOString().split(\"T\")[0];await i(\"editor.insertAtCursor\",t)}return f(u);})();\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29yZS9kYXRlcy50cyIsICJjb3JlL2xpYi9zeXNjYWxsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBzeXNjYWxsIH0gZnJvbSBcIi4vbGliL3N5c2NhbGwudHNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluc2VydFRvZGF5KCkge1xuICBsZXQgbmljZURhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdO1xuICBhd2FpdCBzeXNjYWxsKFwiZWRpdG9yLmluc2VydEF0Q3Vyc29yXCIsIG5pY2VEYXRlKTtcbn1cbiIsICJleHBvcnQgZnVuY3Rpb24gc3lzY2FsbChuYW1lOiBzdHJpbmcsIC4uLmFyZ3M6IGFueVtdKTogYW55IHtcbiAgbGV0IHJlcUlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiU3lzY2FsbFwiLCBuYW1lLCByZXFJZCk7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgc2VsZi5kaXNwYXRjaEV2ZW50KFxuICAgICAgbmV3IEN1c3RvbUV2ZW50KFwic3lzY2FsbFwiLCB7XG4gICAgICAgIGRldGFpbDoge1xuICAgICAgICAgIGlkOiByZXFJZCxcbiAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgIGFyZ3M6IGFyZ3MsXG4gICAgICAgICAgY2FsbGJhY2s6IHJlc29sdmUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICk7XG4gIH0pO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjRoQkFBQSxrQ0NBTyxXQUFpQixLQUFpQixFQUFrQixDQUN6RCxHQUFJLEdBQVEsS0FBSyxNQUFNLEtBQUssU0FBVyxLQUV2QyxNQUFPLElBQUksU0FBUSxDQUFDLEVBQVMsSUFBVyxDQUN0QyxLQUFLLGNBQ0gsR0FBSSxhQUFZLFVBQVcsQ0FDekIsT0FBUSxDQUNOLEdBQUksRUFDSixLQUFNLEVBQ04sS0FBTSxFQUNOLFNBQVUsUURScEIsa0JBQW9DLENBQ2xDLEdBQUksR0FBVyxHQUFJLFFBQU8sY0FBYyxNQUFNLEtBQUssR0FDbkQsS0FBTSxHQUFRLHdCQUF5QiIsCiAgIm5hbWVzIjogW10KfQo=\n",
      "functionName": "insertToday"
    },
    "toggle_h1": {
      "path": "core/markup.ts",
      "code": "(()=>{var o=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var c=Object.prototype.hasOwnProperty;var u=n=>o(n,\"__esModule\",{value:!0});var f=(n,e)=>{for(var t in e)o(n,t,{get:e[t],enumerable:!0})},d=(n,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of g(e))!c.call(n,a)&&(t||a!==\"default\")&&o(n,a,{get:()=>e[a],enumerable:!(i=l(e,a))||i.enumerable});return n};var w=(n=>(e,t)=>n&&n.get(e)||(t=d(u({}),e,1),n&&n.set(e,t),t))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var b={};f(b,{toggleH1:()=>m,toggleH2:()=>y});function r(n,...e){let t=Math.floor(Math.random()*1e6);return new Promise((i,a)=>{self.dispatchEvent(new CustomEvent(\"syscall\",{detail:{id:t,name:n,args:e,callback:i}}))})}async function m(){await s(\"# \")}async function y(){await s(\"## \")}function h(n,e,t){return n.substring(e-t.length,e)===t}async function s(n){let e=await r(\"editor.getText\"),t=await r(\"editor.getCursor\");for(e[t]===`\n`&&t--;t>0&&e[t]!==`\n`;){if(h(e,t,n)){await r(\"editor.replaceRange\",t-n.length,t,\"\");return}t--}t&&t++,await r(\"editor.insertAtPos\",n,t)}return w(b);})();\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29yZS9tYXJrdXAudHMiLCAiY29yZS9saWIvc3lzY2FsbC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgc3lzY2FsbCB9IGZyb20gXCIuL2xpYi9zeXNjYWxsLnRzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0b2dnbGVIMSgpIHtcbiAgYXdhaXQgdG9nZ2xlUHJlZml4KFwiIyBcIik7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0b2dnbGVIMigpIHtcbiAgYXdhaXQgdG9nZ2xlUHJlZml4KFwiIyMgXCIpO1xufVxuXG5mdW5jdGlvbiBsb29rQmFjayhzOiBzdHJpbmcsIHBvczogbnVtYmVyLCBiYWNrU3RyaW5nOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIHMuc3Vic3RyaW5nKHBvcyAtIGJhY2tTdHJpbmcubGVuZ3RoLCBwb3MpID09PSBiYWNrU3RyaW5nO1xufVxuXG5hc3luYyBmdW5jdGlvbiB0b2dnbGVQcmVmaXgocHJlZml4OiBzdHJpbmcpIHtcbiAgbGV0IHRleHQgPSAoYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRUZXh0XCIpKSBhcyBzdHJpbmc7XG4gIGxldCBwb3MgPSAoYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRDdXJzb3JcIikpIGFzIG51bWJlcjtcbiAgaWYgKHRleHRbcG9zXSA9PT0gXCJcXG5cIikge1xuICAgIHBvcy0tO1xuICB9XG4gIHdoaWxlIChwb3MgPiAwICYmIHRleHRbcG9zXSAhPT0gXCJcXG5cIikge1xuICAgIGlmIChsb29rQmFjayh0ZXh0LCBwb3MsIHByZWZpeCkpIHtcbiAgICAgIC8vIEFscmVhZHkgaGFzIHRoaXMgcHJlZml4LCBsZXQncyBmbGlwIGl0XG4gICAgICBhd2FpdCBzeXNjYWxsKFwiZWRpdG9yLnJlcGxhY2VSYW5nZVwiLCBwb3MgLSBwcmVmaXgubGVuZ3RoLCBwb3MsIFwiXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwb3MtLTtcbiAgfVxuICBpZiAocG9zKSB7XG4gICAgcG9zKys7XG4gIH1cbiAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5pbnNlcnRBdFBvc1wiLCBwcmVmaXgsIHBvcyk7XG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIHN5c2NhbGwobmFtZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IGFueSB7XG4gIGxldCByZXFJZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApO1xuICAvLyBjb25zb2xlLmxvZyhcIlN5c2NhbGxcIiwgbmFtZSwgcmVxSWQpO1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHNlbGYuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudChcInN5c2NhbGxcIiwge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICBpZDogcmVxSWQsXG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBhcmdzOiBhcmdzLFxuICAgICAgICAgIGNhbGxiYWNrOiByZXNvbHZlLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICApO1xuICB9KTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI0aEJBQUEsOENDQU8sV0FBaUIsS0FBaUIsRUFBa0IsQ0FDekQsR0FBSSxHQUFRLEtBQUssTUFBTSxLQUFLLFNBQVcsS0FFdkMsTUFBTyxJQUFJLFNBQVEsQ0FBQyxFQUFTLElBQVcsQ0FDdEMsS0FBSyxjQUNILEdBQUksYUFBWSxVQUFXLENBQ3pCLE9BQVEsQ0FDTixHQUFJLEVBQ0osS0FBTSxFQUNOLEtBQU0sRUFDTixTQUFVLFFEUnBCLGtCQUFpQyxDQUMvQixLQUFNLEdBQWEsTUFHckIsa0JBQWlDLENBQy9CLEtBQU0sR0FBYSxPQUdyQixXQUFrQixFQUFXLEVBQWEsRUFBNkIsQ0FDckUsTUFBTyxHQUFFLFVBQVUsRUFBTSxFQUFXLE9BQVEsS0FBUyxFQUd2RCxpQkFBNEIsRUFBZ0IsQ0FDMUMsR0FBSSxHQUFRLEtBQU0sR0FBUSxrQkFDdEIsRUFBTyxLQUFNLEdBQVEsb0JBSXpCLElBSEksRUFBSyxLQUFTO0FBQUEsR0FDaEIsSUFFSyxFQUFNLEdBQUssRUFBSyxLQUFTO0FBQUEsR0FBTSxDQUNwQyxHQUFJLEVBQVMsRUFBTSxFQUFLLEdBQVMsQ0FFL0IsS0FBTSxHQUFRLHNCQUF1QixFQUFNLEVBQU8sT0FBUSxFQUFLLElBQy9ELE9BRUYsSUFFRixBQUFJLEdBQ0YsSUFFRixLQUFNLEdBQVEscUJBQXNCLEVBQVEiLAogICJuYW1lcyI6IFtdCn0K\n",
      "functionName": "toggleH1"
    },
    "toggle_h2": {
      "path": "core/markup.ts",
      "code": "(()=>{var o=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var c=Object.prototype.hasOwnProperty;var u=n=>o(n,\"__esModule\",{value:!0});var f=(n,e)=>{for(var t in e)o(n,t,{get:e[t],enumerable:!0})},d=(n,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of g(e))!c.call(n,a)&&(t||a!==\"default\")&&o(n,a,{get:()=>e[a],enumerable:!(i=l(e,a))||i.enumerable});return n};var w=(n=>(e,t)=>n&&n.get(e)||(t=d(u({}),e,1),n&&n.set(e,t),t))(typeof WeakMap!=\"undefined\"?new WeakMap:0);var b={};f(b,{toggleH1:()=>m,toggleH2:()=>y});function r(n,...e){let t=Math.floor(Math.random()*1e6);return new Promise((i,a)=>{self.dispatchEvent(new CustomEvent(\"syscall\",{detail:{id:t,name:n,args:e,callback:i}}))})}async function m(){await s(\"# \")}async function y(){await s(\"## \")}function h(n,e,t){return n.substring(e-t.length,e)===t}async function s(n){let e=await r(\"editor.getText\"),t=await r(\"editor.getCursor\");for(e[t]===`\n`&&t--;t>0&&e[t]!==`\n`;){if(h(e,t,n)){await r(\"editor.replaceRange\",t-n.length,t,\"\");return}t--}t&&t++,await r(\"editor.insertAtPos\",n,t)}return w(b);})();\n//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiY29yZS9tYXJrdXAudHMiLCAiY29yZS9saWIvc3lzY2FsbC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgc3lzY2FsbCB9IGZyb20gXCIuL2xpYi9zeXNjYWxsLnRzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0b2dnbGVIMSgpIHtcbiAgYXdhaXQgdG9nZ2xlUHJlZml4KFwiIyBcIik7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0b2dnbGVIMigpIHtcbiAgYXdhaXQgdG9nZ2xlUHJlZml4KFwiIyMgXCIpO1xufVxuXG5mdW5jdGlvbiBsb29rQmFjayhzOiBzdHJpbmcsIHBvczogbnVtYmVyLCBiYWNrU3RyaW5nOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIHMuc3Vic3RyaW5nKHBvcyAtIGJhY2tTdHJpbmcubGVuZ3RoLCBwb3MpID09PSBiYWNrU3RyaW5nO1xufVxuXG5hc3luYyBmdW5jdGlvbiB0b2dnbGVQcmVmaXgocHJlZml4OiBzdHJpbmcpIHtcbiAgbGV0IHRleHQgPSAoYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRUZXh0XCIpKSBhcyBzdHJpbmc7XG4gIGxldCBwb3MgPSAoYXdhaXQgc3lzY2FsbChcImVkaXRvci5nZXRDdXJzb3JcIikpIGFzIG51bWJlcjtcbiAgaWYgKHRleHRbcG9zXSA9PT0gXCJcXG5cIikge1xuICAgIHBvcy0tO1xuICB9XG4gIHdoaWxlIChwb3MgPiAwICYmIHRleHRbcG9zXSAhPT0gXCJcXG5cIikge1xuICAgIGlmIChsb29rQmFjayh0ZXh0LCBwb3MsIHByZWZpeCkpIHtcbiAgICAgIC8vIEFscmVhZHkgaGFzIHRoaXMgcHJlZml4LCBsZXQncyBmbGlwIGl0XG4gICAgICBhd2FpdCBzeXNjYWxsKFwiZWRpdG9yLnJlcGxhY2VSYW5nZVwiLCBwb3MgLSBwcmVmaXgubGVuZ3RoLCBwb3MsIFwiXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwb3MtLTtcbiAgfVxuICBpZiAocG9zKSB7XG4gICAgcG9zKys7XG4gIH1cbiAgYXdhaXQgc3lzY2FsbChcImVkaXRvci5pbnNlcnRBdFBvc1wiLCBwcmVmaXgsIHBvcyk7XG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIHN5c2NhbGwobmFtZTogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSk6IGFueSB7XG4gIGxldCByZXFJZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApO1xuICAvLyBjb25zb2xlLmxvZyhcIlN5c2NhbGxcIiwgbmFtZSwgcmVxSWQpO1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHNlbGYuZGlzcGF0Y2hFdmVudChcbiAgICAgIG5ldyBDdXN0b21FdmVudChcInN5c2NhbGxcIiwge1xuICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICBpZDogcmVxSWQsXG4gICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICBhcmdzOiBhcmdzLFxuICAgICAgICAgIGNhbGxiYWNrOiByZXNvbHZlLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICApO1xuICB9KTtcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI0aEJBQUEsOENDQU8sV0FBaUIsS0FBaUIsRUFBa0IsQ0FDekQsR0FBSSxHQUFRLEtBQUssTUFBTSxLQUFLLFNBQVcsS0FFdkMsTUFBTyxJQUFJLFNBQVEsQ0FBQyxFQUFTLElBQVcsQ0FDdEMsS0FBSyxjQUNILEdBQUksYUFBWSxVQUFXLENBQ3pCLE9BQVEsQ0FDTixHQUFJLEVBQ0osS0FBTSxFQUNOLEtBQU0sRUFDTixTQUFVLFFEUnBCLGtCQUFpQyxDQUMvQixLQUFNLEdBQWEsTUFHckIsa0JBQWlDLENBQy9CLEtBQU0sR0FBYSxPQUdyQixXQUFrQixFQUFXLEVBQWEsRUFBNkIsQ0FDckUsTUFBTyxHQUFFLFVBQVUsRUFBTSxFQUFXLE9BQVEsS0FBUyxFQUd2RCxpQkFBNEIsRUFBZ0IsQ0FDMUMsR0FBSSxHQUFRLEtBQU0sR0FBUSxrQkFDdEIsRUFBTyxLQUFNLEdBQVEsb0JBSXpCLElBSEksRUFBSyxLQUFTO0FBQUEsR0FDaEIsSUFFSyxFQUFNLEdBQUssRUFBSyxLQUFTO0FBQUEsR0FBTSxDQUNwQyxHQUFJLEVBQVMsRUFBTSxFQUFLLEdBQVMsQ0FFL0IsS0FBTSxHQUFRLHNCQUF1QixFQUFNLEVBQU8sT0FBUSxFQUFLLElBQy9ELE9BRUYsSUFFRixBQUFJLEdBQ0YsSUFFRixLQUFNLEdBQVEscUJBQXNCLEVBQVEiLAogICJuYW1lcyI6IFtdCn0K\n",
      "functionName": "toggleH2"
    }
  }
}